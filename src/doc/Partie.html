<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Partie - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
  var index_rel_prefix = "./";
</script>

<script src="./js/navigation.js" defer></script>
<script src="./js/search.js" defer></script>
<script src="./js/search_index.js" defer></script>
<script src="./js/searcher.js" defer></script>
<script src="./js/darkfish.js" defer></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Object
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-creer">::creer</a>
    
    <li ><a href="#method-c-garbageCollectorConstant">::garbageCollectorConstant</a>
    
    <li ><a href="#method-i-afficherAide">#afficherAide</a>
    
    <li ><a href="#method-i-afficherChrono">#afficherChrono</a>
    
    <li ><a href="#method-i-afficherMenu">#afficherMenu</a>
    
    <li ><a href="#method-i-afficherRegles">#afficherRegles</a>
    
    <li ><a href="#method-i-appliquerCSS">#appliquerCSS</a>
    
    <li ><a href="#method-i-appliquerChangements">#appliquerChangements</a>
    
    <li ><a href="#method-i-calculDuScore">#calculDuScore</a>
    
    <li ><a href="#method-i-causerVerifierGrille">#causerVerifierGrille</a>
    
    <li ><a href="#method-i-chargerCheckpoint">#chargerCheckpoint</a>
    
    <li ><a href="#method-i-creationBoutonsDeLInterface">#creationBoutonsDeLInterface</a>
    
    <li ><a href="#method-i-creationFenetre">#creationFenetre</a>
    
    <li ><a href="#method-i-creationGrilleDeBoutons">#creationGrilleDeBoutons</a>
    
    <li ><a href="#method-i-creerBoutonGrille">#creerBoutonGrille</a>
    
    <li ><a href="#method-i-creerChrono">#creerChrono</a>
    
    <li ><a href="#method-i-creerPontsPotentiels">#creerPontsPotentiels</a>
    
    <li ><a href="#method-i-detruireImage">#detruireImage</a>
    
    <li ><a href="#method-i-estVide-3F">#estVide?</a>
    
    <li ><a href="#method-i-evoluerNbCoups">#evoluerNbCoups</a>
    
    <li ><a href="#method-i-finDePartie">#finDePartie</a>
    
    <li ><a href="#method-i-genererAide">#genererAide</a>
    
    <li ><a href="#method-i-genererMap">#genererMap</a>
    
    <li ><a href="#method-i-getMode">#getMode</a>
    
    <li ><a href="#method-i-majGraphique">#majGraphique</a>
    
    <li ><a href="#method-i-majGraphiqueIles">#majGraphiqueIles</a>
    
    <li ><a href="#method-i-modifierPont">#modifierPont</a>
    
    <li ><a href="#method-i-positionDansGrille">#positionDansGrille</a>
    
    <li ><a href="#method-i-puisJeCreerPont">#puisJeCreerPont</a>
    
    <li ><a href="#method-i-reDo">#reDo</a>
    
    <li ><a href="#method-i-remplissageFichier">#remplissageFichier</a>
    
    <li ><a href="#method-i-remplissageIlesVoisines">#remplissageIlesVoisines</a>
    
    <li ><a href="#method-i-restaurerDepuisFichier">#restaurerDepuisFichier</a>
    
    <li ><a href="#method-i-retourInGame">#retourInGame</a>
    
    <li ><a href="#method-i-sauvegarderCheckpoint">#sauvegarderCheckpoint</a>
    
    <li ><a href="#method-i-sauvegarderVersFichier">#sauvegarderVersFichier</a>
    
    <li ><a href="#method-i-unDo">#unDo</a>
    
    <li ><a href="#method-i-verifierGrille">#verifierGrille</a>
    
    <li ><a href="#method-i-viderGrille">#viderGrille</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Partie">
  <h1 id="class-Partie" class="class">
    class Partie
  </h1>

  <section class="description">
    
<p>Classe qui représente une partie Cette classe contient les variables d&#39;instances suivantes :</p>
<dl class="rdoc-list note-list"><dt>@grille
<dd>
<p>un tableau à deux dimensions de <a href="Case.html"><code>Case</code></a></p>
</dd><dt>@taille
<dd>
<p>la taille de la @grille (carrée). Il existe uniquement des grilles de taille 5, 6, 8, 10 et 15</p>
</dd><dt>@difficulte
<dd>
<p>chaine de caractères indiquant la difficulté de la grille</p>
</dd><dt>@listIle
<dd>
<p>un tableau contenant les îles de la partie</p>
</dd><dt>@listPont
<dd>
<p>un tableau contenant les ponts de la partie</p>
</dd><dt>@listCoup
<dd>
<p>un tableau contenant des ponts, retraçant les interactions du joueur</p>
</dd><dt>@listReDo
<dd>
<p>un tableau contenant des ponts, remplis à l&#39;aide du bouton undo, depuis @listCoup</p>
</dd><dt>@nbCoups
<dd>
<p>le nombre d&#39;interactions du joueur avec les ponts</p>
</dd><dt>@checkpoint
<dd>
<p>un tableau contenant des ponts, est un état sauvegardé de @listPont</p>
</dd><dt>@checkpointCoups
<dd>
<p>un tableau contenant des ponts, est un état sauvegardé de @listCoup</p>
</dd><dt>@timer
<dd>
<p>le chronomètre utilisé pendant la partie</p>
</dd><dt>@aide
<dd>
<p>le système d&#39;aide utilisé pendant la partie</p>
</dd><dt>@chronoText
<dd>
<p>le label qui contient le texte du chrono (mis à jour par le thread du chrono)</p>
</dd><dt>@coupsText
<dd>
<p>le label qui contient le nombre de coups du joueur</p>
</dd><dt>@threadAffichageChrono
<dd>
<p>thread permettant de mettre à jour le label du chrono</p>
</dd><dt>@fenetre
<dd>
<p>la fenêtre gtk du jeu</p>
</dd><dt>@grid
<dd>
<p>la grille gtk qui permet de contenir les boutons (cases) de l&#39;espace hashi (gauche)</p>
</dd><dt>@hboxInfos
<dd>
<p>la box horizontale qui contient le bouton du menu et les informations de la partie</p>
</dd><dt>@gridInterface
<dd>
<p>la grille gtk qui permet de contenir les boutons d&#39;interface (droite)</p>
</dd><dt>@hbox
<dd>
<p>la box horizontale qui contient la @grid et la @gridInterface</p>
</dd><dt>@vboxGauche
<dd>
<p>la box verticale qui contient la @grid et @hboxInfos</p>
</dd><dt>@bufferConseils
<dd>
<p>le buffer qui contient le texte généré par une aide</p>
</dd><dt>@grilleBT
<dd>
<p>un tableau qui contient les boutons dans l&#39;ordre des cases associées (dans grille)</p>
</dd><dt>@undoBouton
<dd>
<p>bouton d&#39;undo pour défaire le dernier pont</p>
</dd><dt>@redoBouton
<dd>
<p>bouton de redo pour refaire le dernier pont défait</p>
</dd><dt>@viderBouton
<dd>
<p>bouton pour vider la grille (grisé quand vide)</p>
</dd><dt>@tailleImg
<dd>
<p>la taille en pixel d&#39;une image sur un des boutons de la @grid</p>
</dd><dt>@conseil
<dd>
<p>le conseil actuellement généré</p>
</dd><dt>@conseilAffiche
<dd>
<p>booléen permettant de savoir si un conseil est actuellement montré sur la grille</p>
</dd><dt>@pseudo
<dd>
<p>pseudo du joueur</p>
</dd><dt>@nomMap
<dd>
<p>chaîne de caractères correspondant à la map chargée</p>
</dd><dt>@nbGrilles
<dd>
<p>le nombre de grilles résolues (utilisé en mode Progressif et en PuzzleRush)</p>
</dd><dt>@radioTheme
<dd>
<p>les radio boutons de choix du thème dans le menu in-game</p>
</dd><dt>@radioDaltonien
<dd>
<p>les radio boutons de choix du mode de couleur dans le menu in-game</p>
</dd><dt>@inGameMenu
<dd>
<p>la box correspondant au menu in-game</p>
</dd></dl>

  </section>

  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-aide" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">aide</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>L&#39;aide, type <a href="Aide.html"><code>Aide</code></a></p>
        
        </div>
      </div>
      
      <div id="attribute-i-difficulte" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">difficulte</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>La difficulté de la grille (chaine de caractères)</p>
        
        </div>
      </div>
      
      <div id="attribute-i-grille" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">grille</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>La grille du jeu, constituée d&#39;un tableau de <a href="Case.html"><code>Case</code></a></p>
        
        </div>
      </div>
      
      <div id="attribute-i-listCoup" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">listCoup</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>La liste des coups (tableau de <a href="Pont.html"><code>Pont</code></a>)</p>
        
        </div>
      </div>
      
      <div id="attribute-i-listIle" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">listIle</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>La liste des <a href="Ile.html"><code>Ile</code></a></p>
        
        </div>
      </div>
      
      <div id="attribute-i-listPont" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">listPont</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>La liste des <a href="Pont.html"><code>Pont</code></a></p>
        
        </div>
      </div>
      
      <div id="attribute-i-nbCoups" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">nbCoups</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>Le nombre de coups, entier</p>
        
        </div>
      </div>
      
      <div id="attribute-i-taille" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">taille</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>La taille de la grille, entier correspondant au côté du carré représenté par la grille</p>
        
        </div>
      </div>
      
      <div id="attribute-i-timer" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">timer</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>Le chronomètre, type Chronometre</p>
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-creer" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">creer</span><span
            class="method-args">(fenetre, difficulte, taille, pseudo,cheminSAV)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Constructeur de la classe <a href="Partie.html"><code>Partie</code></a>.</p>
<ul><li>
<p><code>fenetre</code> [Gtk::Window] - Fenêtre où se trouve la partie</p>
</li><li>
<p><code>difficulte</code> [String] - Difficulté de la grille générée (facile, moyenne, difficile)</p>
</li><li>
<p><code>taille</code> [Integer/String] - Taille de la grille générée</p>
</li><li>
<p><code>pseudo</code> [String] - Pseudo du joueur (donné par le menu)</p>
</li><li>
<p><code>cheminSAV</code> [String] - Emplacement de la sauvegarde, sinon “”</p>
</li></ul>
          
          

          
          <div class="method-source-code" id="creer-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 97</span>
<span class="ruby-keyword">def</span> <span class="ruby-constant">Partie</span>.<span class="ruby-identifier ruby-title">creer</span>(<span class="ruby-identifier">fenetre</span>, <span class="ruby-identifier">difficulte</span>, <span class="ruby-identifier">taille</span>, <span class="ruby-identifier">pseudo</span>,<span class="ruby-identifier">cheminSAV</span>)
    <span class="ruby-identifier">new</span>(<span class="ruby-identifier">fenetre</span>, <span class="ruby-identifier">difficulte</span>, <span class="ruby-identifier">taille</span>, <span class="ruby-identifier">pseudo</span>,<span class="ruby-identifier">cheminSAV</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-garbageCollectorConstant" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">garbageCollectorConstant</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode qui créé un thread, se débarassant toutes les secondes des images inutiles dans la mémoire</p>
          
          

          
          <div class="method-source-code" id="garbageCollectorConstant-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 1248</span>
<span class="ruby-keyword">def</span> <span class="ruby-constant">Partie</span>.<span class="ruby-identifier ruby-title">garbageCollectorConstant</span>()
    <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span>
        <span class="ruby-keyword">while</span> <span class="ruby-keyword">true</span>
            <span class="ruby-comment"># On allume le garbage collector toutes les 1 sec pour vider la mémoire des images détruites par image.clear</span>
            <span class="ruby-identifier">sleep</span>(<span class="ruby-value">1</span>)
            <span class="ruby-constant">GC</span>.<span class="ruby-identifier">start</span>
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-afficherAide" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">afficherAide</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode provoquant l&#39;affichage d&#39;une aide préalablement générée</p>
          
          

          
          <div class="method-source-code" id="afficherAide-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 612</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">afficherAide</span>()
    <span class="ruby-keyword">if</span>(<span class="ruby-ivar">@conseil</span>.<span class="ruby-identifier">nbIlesConcernees</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>)
        <span class="ruby-keyword">if</span>(<span class="ruby-ivar">@conseilAffiche</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span>)
            <span class="ruby-keyword">for</span> <span class="ruby-identifier">c</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@conseil</span>.<span class="ruby-identifier">listeDesIlesConcernees</span>
                <span class="ruby-identifier">c</span>.<span class="ruby-identifier">highlight</span> = <span class="ruby-keyword">true</span>
                <span class="ruby-ivar">@grilleBT</span>[<span class="ruby-identifier">c</span>.<span class="ruby-identifier">positionX</span>][<span class="ruby-identifier">c</span>.<span class="ruby-identifier">positionY</span>].<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_grille_highlighted&quot;</span>
            <span class="ruby-keyword">end</span>    
            <span class="ruby-ivar">@conseilAffiche</span> = <span class="ruby-keyword">true</span>
        <span class="ruby-keyword">else</span>
            <span class="ruby-keyword">for</span> <span class="ruby-identifier">c</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@conseil</span>.<span class="ruby-identifier">listeDesIlesConcernees</span>
                <span class="ruby-identifier">c</span>.<span class="ruby-identifier">highlight</span> = <span class="ruby-keyword">false</span>
                <span class="ruby-keyword">if</span>(<span class="ruby-identifier">c</span>.<span class="ruby-identifier">verifierNombreDePont</span>)
                    <span class="ruby-ivar">@grilleBT</span>[<span class="ruby-identifier">c</span>.<span class="ruby-identifier">positionX</span>][<span class="ruby-identifier">c</span>.<span class="ruby-identifier">positionY</span>].<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_grille_valide&quot;</span>
                <span class="ruby-keyword">elsif</span>(<span class="ruby-identifier">c</span>.<span class="ruby-identifier">getNbPonts</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">valeur</span>)
                    <span class="ruby-ivar">@grilleBT</span>[<span class="ruby-identifier">c</span>.<span class="ruby-identifier">positionX</span>][<span class="ruby-identifier">c</span>.<span class="ruby-identifier">positionY</span>].<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_grille_invalide&quot;</span>
                <span class="ruby-keyword">else</span>
                    <span class="ruby-ivar">@grilleBT</span>[<span class="ruby-identifier">c</span>.<span class="ruby-identifier">positionX</span>][<span class="ruby-identifier">c</span>.<span class="ruby-identifier">positionY</span>].<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_grille_ile&quot;</span>
                <span class="ruby-keyword">end</span>
            <span class="ruby-keyword">end</span>
            <span class="ruby-ivar">@conseilAffiche</span> = <span class="ruby-keyword">false</span>
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-afficherChrono" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">afficherChrono</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode qui permet de créer un thread qui va modifier toutes les secondes l&#39;affichage du chrono (gère les cas dépendants de la modification du chrono)</p>
          
          

          
          <div class="method-source-code" id="afficherChrono-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 494</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">afficherChrono</span>()
    <span class="ruby-ivar">@threadAffichageChrono</span> = <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span>
        <span class="ruby-keyword">while</span> <span class="ruby-ivar">@timer</span>.<span class="ruby-identifier">getEnExec</span>
            <span class="ruby-comment">#On met à jour le label du timer toutes les 1 secondes</span>
            <span class="ruby-identifier">sleep</span>(<span class="ruby-value">0.5</span>)
            <span class="ruby-ivar">@chronoText</span>.<span class="ruby-identifier">text</span> = <span class="ruby-ivar">@timer</span>.<span class="ruby-identifier">afficher</span>()
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-afficherMenu" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">afficherMenu</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode provoquant l&#39;affichage du menu in-game</p>
          
          

          
          <div class="method-source-code" id="afficherMenu-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 848</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">afficherMenu</span>()
    <span class="ruby-ivar">@timer</span>.<span class="ruby-identifier">stopChrono</span>()
    <span class="ruby-identifier">tempsEcoule</span> = <span class="ruby-ivar">@timer</span>.<span class="ruby-identifier">valeur</span>

    <span class="ruby-comment"># HBOX pour daltonien</span>
    <span class="ruby-identifier">daltonienBox</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Box</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:horizontal</span>, <span class="ruby-identifier">spacing</span>=<span class="ruby-value">50</span>)
    <span class="ruby-identifier">daltonienBox</span>.<span class="ruby-identifier">homogeneous</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-comment"># Label pour daltonien</span>
    <span class="ruby-identifier">daltonienLabel</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Label</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Mode de couleurs :&quot;</span>, {<span class="ruby-value">:use_underline</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">false</span>}).<span class="ruby-identifier">set_single_line_mode</span>(<span class="ruby-keyword">true</span>)
    <span class="ruby-identifier">daltonienLabel</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;lbl_interface_gras&quot;</span>
    <span class="ruby-comment"># Groupe de radio bouton pour le mode daltonien</span>
    <span class="ruby-ivar">@radioDaltonien</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">RadioButton</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:label</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;Vision Normale&#39;</span>, <span class="ruby-value">:underline</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">true</span>)
    <span class="ruby-ivar">@radioDaltonien</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;lbl_interface&quot;</span>
    <span class="ruby-identifier">radioDeute</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">RadioButton</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:label</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;Deutéranopie&#39;</span>, <span class="ruby-value">:member</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-ivar">@radioDaltonien</span>)
    <span class="ruby-identifier">radioDeute</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;lbl_interface&quot;</span>
    <span class="ruby-identifier">radioProta</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">RadioButton</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:label</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;Protanopie&#39;</span>, <span class="ruby-value">:member</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-ivar">@radioDaltonien</span>)
    <span class="ruby-identifier">radioProta</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;lbl_interface&quot;</span>
    <span class="ruby-identifier">radioTrita</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">RadioButton</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:label</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;Tritanopie&#39;</span>, <span class="ruby-value">:member</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-ivar">@radioDaltonien</span>)
    <span class="ruby-identifier">radioTrita</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;lbl_interface&quot;</span>
    <span class="ruby-comment"># Choix actuel</span>
    <span class="ruby-ivar">@radioDaltonien</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-identifier">radioDeute</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-identifier">radioProta</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-identifier">radioTrita</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">false</span>

    <span class="ruby-keyword">case</span> <span class="ruby-identifier">$modeDaltonien</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">0</span>
        <span class="ruby-ivar">@radioDaltonien</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">radioDeute</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">2</span>
        <span class="ruby-identifier">radioProta</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">3</span>
        <span class="ruby-identifier">radioTrita</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-comment"># Ajout à la HBOX</span>
    <span class="ruby-identifier">daltonienBox</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">daltonienLabel</span>)
    <span class="ruby-identifier">daltonienBox</span>.<span class="ruby-identifier">add</span>(<span class="ruby-ivar">@radioDaltonien</span>)
    <span class="ruby-identifier">daltonienBox</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">radioDeute</span>)
    <span class="ruby-identifier">daltonienBox</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">radioProta</span>)
    <span class="ruby-identifier">daltonienBox</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">radioTrita</span>)


    <span class="ruby-comment"># HBOX pour thème</span>
    <span class="ruby-identifier">themeBox</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Box</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:horizontal</span>, <span class="ruby-identifier">spacing</span>=<span class="ruby-value">50</span>)
    <span class="ruby-identifier">themeBox</span>.<span class="ruby-identifier">homogeneous</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-comment"># Label pour thème</span>
    <span class="ruby-identifier">themeLabel</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Label</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Thème :&quot;</span>, {<span class="ruby-value">:use_underline</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">false</span>}).<span class="ruby-identifier">set_single_line_mode</span>(<span class="ruby-keyword">true</span>)
    <span class="ruby-identifier">themeLabel</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;lbl_interface_gras&quot;</span>
    <span class="ruby-comment"># Groupe de radio bouton pour thèmes</span>
    <span class="ruby-ivar">@radioTheme</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">RadioButton</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:label</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;Clair&#39;</span>, <span class="ruby-value">:underline</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">true</span>)
    <span class="ruby-ivar">@radioTheme</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;lbl_interface&quot;</span>
    <span class="ruby-identifier">radioSombre</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">RadioButton</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:label</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;Sombre&#39;</span>, <span class="ruby-value">:member</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-ivar">@radioTheme</span>)
    <span class="ruby-identifier">radioSombre</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;lbl_interface&quot;</span>
    <span class="ruby-comment"># Choix actuel</span>
    <span class="ruby-keyword">if</span>(<span class="ruby-constant">Theme</span>.<span class="ruby-identifier">isClair?</span>)
        <span class="ruby-ivar">@radioTheme</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">true</span>
        <span class="ruby-identifier">radioSombre</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">false</span>

    <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">radioSombre</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">true</span>
        <span class="ruby-ivar">@radioTheme</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-comment"># Ajout à la HBOX</span>
    <span class="ruby-identifier">themeBox</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">themeLabel</span>)
    <span class="ruby-identifier">themeBox</span>.<span class="ruby-identifier">add</span>(<span class="ruby-ivar">@radioTheme</span>)
    <span class="ruby-identifier">themeBox</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">radioSombre</span>)

    <span class="ruby-comment"># Bouton classement</span>
    <span class="ruby-identifier">boutonClassement</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Button</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:label</span> <span class="ruby-operator">=&gt;</span><span class="ruby-string">&quot;Classement&quot;</span>)
    <span class="ruby-identifier">boutonClassement</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_interface&quot;</span>
    <span class="ruby-identifier">boutonClassement</span>.<span class="ruby-identifier">signal_connect</span>(<span class="ruby-string">&#39;clicked&#39;</span>){
        <span class="ruby-comment"># Aller au classement en sauvegardant l&#39;état de la grille</span>
        <span class="ruby-ivar">@fenetre</span>.<span class="ruby-identifier">remove</span>(<span class="ruby-ivar">@inGameMenu</span>)
        <span class="ruby-constant">Classement</span>.<span class="ruby-identifier">creer</span>(<span class="ruby-ivar">@pseudo</span>,<span class="ruby-ivar">@fenetre</span>,<span class="ruby-ivar">@inGameMenu</span>)
    }

    <span class="ruby-comment"># Bouton sauvegarder</span>
    <span class="ruby-identifier">boutonSauvegarder</span>= <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Button</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:label</span> <span class="ruby-operator">=&gt;</span><span class="ruby-string">&quot;Sauvegarder dans un fichier&quot;</span>)
    <span class="ruby-identifier">boutonSauvegarder</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_interface&quot;</span>
    <span class="ruby-identifier">boutonSauvegarder</span>.<span class="ruby-identifier">signal_connect</span>(<span class="ruby-string">&#39;clicked&#39;</span>){
        <span class="ruby-identifier">sauvegarderVersFichier</span>()
    }

    <span class="ruby-comment"># Bouton charger</span>
    <span class="ruby-identifier">boutonCharger</span>= <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Button</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:label</span> <span class="ruby-operator">=&gt;</span><span class="ruby-string">&quot;Charger depuis un fichier&quot;</span>)
    <span class="ruby-identifier">boutonCharger</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_interface&quot;</span>
    <span class="ruby-identifier">boutonCharger</span>.<span class="ruby-identifier">signal_connect</span>(<span class="ruby-string">&#39;clicked&#39;</span>){
        <span class="ruby-ivar">@fenetre</span>.<span class="ruby-identifier">remove</span>(<span class="ruby-ivar">@inGameMenu</span>)
        <span class="ruby-constant">InterfaceMenuJouerChargerPartie</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@fenetre</span>)
    }

    <span class="ruby-comment"># Bouton Accueil</span>
    <span class="ruby-identifier">boutonAccueil</span>= <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Button</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:label</span> <span class="ruby-operator">=&gt;</span><span class="ruby-string">&quot;Accueil&quot;</span>)
    <span class="ruby-identifier">boutonAccueil</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_interface&quot;</span>
    <span class="ruby-identifier">boutonAccueil</span>.<span class="ruby-identifier">signal_connect</span>(<span class="ruby-string">&#39;clicked&#39;</span>){
        <span class="ruby-identifier">sauvegarderVersFichier</span>()
        <span class="ruby-ivar">@fenetre</span>.<span class="ruby-identifier">remove</span>(<span class="ruby-ivar">@inGameMenu</span>)
        <span class="ruby-constant">InterfaceAccueilJeu</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@fenetre</span>)
    }

    <span class="ruby-comment"># Bouton Retour</span>
    <span class="ruby-identifier">boutonRetour</span>= <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Button</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:label</span> <span class="ruby-operator">=&gt;</span><span class="ruby-string">&quot;Annuler&quot;</span>)
    <span class="ruby-identifier">boutonRetour</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_interface&quot;</span>
    <span class="ruby-identifier">boutonRetour</span>.<span class="ruby-identifier">signal_connect</span>(<span class="ruby-string">&#39;clicked&#39;</span>){
        <span class="ruby-identifier">retourInGame</span>(<span class="ruby-identifier">tempsEcoule</span>)
    }

    <span class="ruby-comment"># Bouton OK</span>
    <span class="ruby-identifier">boutonOK</span>= <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Button</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:label</span> <span class="ruby-operator">=&gt;</span><span class="ruby-string">&quot;OK&quot;</span>)
    <span class="ruby-identifier">boutonOK</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_interface&quot;</span>
    <span class="ruby-identifier">boutonOK</span>.<span class="ruby-identifier">signal_connect</span>(<span class="ruby-string">&#39;clicked&#39;</span>){
        <span class="ruby-identifier">retourInGame</span>(<span class="ruby-identifier">tempsEcoule</span>)
        <span class="ruby-identifier">appliquerChangements</span>()
    }

    <span class="ruby-comment"># HBOX boutons de validation</span>
    <span class="ruby-identifier">validationBox</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Box</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:horizontal</span>, <span class="ruby-identifier">spacing</span>=<span class="ruby-value">50</span>)
    <span class="ruby-identifier">validationBox</span>.<span class="ruby-identifier">homogeneous</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-comment"># Ajout bouton Accueil</span>
    <span class="ruby-identifier">validationBox</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">boutonAccueil</span>)
    <span class="ruby-comment"># Ajout bouton Retour</span>
    <span class="ruby-identifier">validationBox</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">boutonRetour</span>)
    <span class="ruby-comment"># Ajout bouton OK</span>
    <span class="ruby-identifier">validationBox</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">boutonOK</span>)


    <span class="ruby-comment"># Création VBOX @inGameMenu pour contenir le menu</span>
    <span class="ruby-ivar">@inGameMenu</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Box</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:vertical</span>, <span class="ruby-identifier">spacing</span>=<span class="ruby-value">25</span>)
    <span class="ruby-ivar">@inGameMenu</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;box_ingame&quot;</span>
    <span class="ruby-ivar">@inGameMenu</span>.<span class="ruby-identifier">homogeneous</span> = <span class="ruby-keyword">true</span>

    <span class="ruby-comment"># Ajout hbox daltonien</span>
    <span class="ruby-ivar">@inGameMenu</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">daltonienBox</span>)
    <span class="ruby-comment"># Ajout hbox thème</span>
    <span class="ruby-ivar">@inGameMenu</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">themeBox</span>)
    <span class="ruby-comment"># Ajout bouton classement</span>
    <span class="ruby-ivar">@inGameMenu</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">boutonClassement</span>)
    <span class="ruby-comment"># Ajout bouton sauvegarder</span>
    <span class="ruby-ivar">@inGameMenu</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">boutonSauvegarder</span>)
    <span class="ruby-comment"># Ajout bouton charger</span>
    <span class="ruby-ivar">@inGameMenu</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">boutonCharger</span>)
    <span class="ruby-comment"># Ajout hbox validation</span>
    <span class="ruby-ivar">@inGameMenu</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">validationBox</span>)

    <span class="ruby-comment"># Ajout dans la fenêtre</span>
    <span class="ruby-ivar">@fenetre</span>.<span class="ruby-identifier">remove</span>(<span class="ruby-ivar">@hbox</span>)
    <span class="ruby-ivar">@fenetre</span>.<span class="ruby-identifier">add</span>(<span class="ruby-ivar">@inGameMenu</span>)
    <span class="ruby-ivar">@fenetre</span>.<span class="ruby-identifier">show_all</span>()
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-afficherRegles" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">afficherRegles</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode provoquant l&#39;affichage des règles</p>
          
          

          
          <div class="method-source-code" id="afficherRegles-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 813</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">afficherRegles</span>()
    <span class="ruby-identifier">regles</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageDialog</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:parent</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-ivar">@fenetre</span>, <span class="ruby-value">:flags</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-value">:destroy_with_parent</span>, <span class="ruby-value">:type</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-value">:info</span>, <span class="ruby-value">:buttons</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-value">:ok</span>, <span class="ruby-value">:message</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;Règles du jeu&quot;</span>)
    <span class="ruby-identifier">regles</span>.<span class="ruby-identifier">secondary_text</span>=<span class="ruby-string">&quot;Le but du jeu de Hashi est de relier des îles avec des ponts. Les pont peuvent être simples ou doubles.\nChaque île indique le nombre de ponts auquel elle doit être reliée. Un pont simple compte pour un et un double compte pour deux.\nLes îles doivent être toutes reliées entre elles d&#39;un seul tenant.&quot;</span>
    <span class="ruby-identifier">regles</span>.<span class="ruby-identifier">run</span>()
    <span class="ruby-identifier">regles</span>.<span class="ruby-identifier">destroy</span>()
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-appliquerCSS" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">appliquerCSS</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode qui applique le CSS de la partie.</p>
          
          

          
          <div class="method-source-code" id="appliquerCSS-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 189</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">appliquerCSS</span>()
    <span class="ruby-comment"># Partie couleur</span>
    <span class="ruby-identifier">provider</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">CssProvider</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">$modeDaltonien</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">modeCouleur</span> = <span class="ruby-string">&quot;Normal&quot;</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">modeCouleur</span> = <span class="ruby-string">&quot;Deuteranopie&quot;</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">2</span>
        <span class="ruby-identifier">modeCouleur</span> = <span class="ruby-string">&quot;Protanopie&quot;</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">3</span>
        <span class="ruby-identifier">modeCouleur</span> = <span class="ruby-string">&quot;Tritanopie&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">provider</span>.<span class="ruby-identifier">load_from_path</span>(<span class="ruby-node">&quot;../res/css/partie#{modeCouleur}.css&quot;</span>)
    <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">StyleContext</span>.<span class="ruby-identifier">add_provider_for_screen</span>(<span class="ruby-constant">Gdk</span><span class="ruby-operator">::</span><span class="ruby-constant">Screen</span>.<span class="ruby-identifier">default</span>, <span class="ruby-identifier">provider</span>, <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">StyleProvider</span><span class="ruby-operator">::</span><span class="ruby-constant">PRIORITY_APPLICATION</span>)
    <span class="ruby-comment"># Partie thème</span>
    <span class="ruby-constant">Theme</span>.<span class="ruby-identifier">themePartieAppliquer</span>()
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-appliquerChangements" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">appliquerChangements</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode permettant d&#39;appliquer les changements de thème et de couleurs à partir des radioButton</p>
          
          

          
          <div class="method-source-code" id="appliquerChangements-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 1001</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">appliquerChangements</span>()
    <span class="ruby-comment"># Récupére le nouveau mode de couleurs et l&#39;applique</span>
    <span class="ruby-identifier">choisi</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">r</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@radioDaltonien</span>.<span class="ruby-identifier">group</span>
        <span class="ruby-keyword">if</span>(<span class="ruby-identifier">r</span>.<span class="ruby-identifier">active?</span>)
            <span class="ruby-identifier">choisi</span> = <span class="ruby-identifier">r</span>
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span>(<span class="ruby-identifier">choisi</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>)
        <span class="ruby-identifier">provider</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">CssProvider</span>.<span class="ruby-identifier">new</span>
        <span class="ruby-keyword">case</span> <span class="ruby-identifier">choisi</span>.<span class="ruby-identifier">label</span>
        <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;Vision Normale&quot;</span>
            <span class="ruby-identifier">$modeDaltonien</span> = <span class="ruby-value">0</span>
            <span class="ruby-identifier">modeCouleur</span> = <span class="ruby-string">&quot;Normal&quot;</span>
        <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;Deutéranopie&quot;</span>
            <span class="ruby-identifier">$modeDaltonien</span> = <span class="ruby-value">1</span>
            <span class="ruby-identifier">modeCouleur</span> = <span class="ruby-string">&quot;Deuteranopie&quot;</span>
        <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;Protanopie&quot;</span>
            <span class="ruby-identifier">$modeDaltonien</span> = <span class="ruby-value">2</span>
            <span class="ruby-identifier">modeCouleur</span> = <span class="ruby-string">&quot;Protanopie&quot;</span>
        <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;Tritanopie&quot;</span>
            <span class="ruby-identifier">$modeDaltonien</span> = <span class="ruby-value">3</span>
            <span class="ruby-identifier">modeCouleur</span> = <span class="ruby-string">&quot;Tritanopie&quot;</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">provider</span>.<span class="ruby-identifier">load_from_path</span>(<span class="ruby-node">&quot;../res/css/partie#{modeCouleur}.css&quot;</span>)
        <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">StyleContext</span>.<span class="ruby-identifier">add_provider_for_screen</span>(<span class="ruby-constant">Gdk</span><span class="ruby-operator">::</span><span class="ruby-constant">Screen</span>.<span class="ruby-identifier">default</span>, <span class="ruby-identifier">provider</span>, <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">StyleProvider</span><span class="ruby-operator">::</span><span class="ruby-constant">PRIORITY_APPLICATION</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-comment"># Récupére le nouveau thème et l&#39;applique</span>
    <span class="ruby-constant">Theme</span>.<span class="ruby-identifier">themePartieSwitch</span>(<span class="ruby-ivar">@radioTheme</span>.<span class="ruby-identifier">active?</span>)
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">p</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@listPont</span>
        <span class="ruby-keyword">if</span>(<span class="ruby-identifier">p</span>.<span class="ruby-identifier">etatPont</span><span class="ruby-operator">&gt;</span><span class="ruby-value">0</span>)
            <span class="ruby-identifier">majGraphique</span>(<span class="ruby-identifier">p</span>)
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-calculDuScore" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">calculDuScore</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode permettant de calculer le score actuel du joueur</p>
          
          

          
          <div class="method-source-code" id="calculDuScore-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 589</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">calculDuScore</span>()
    <span class="ruby-identifier">time</span> = <span class="ruby-ivar">@timer</span>.<span class="ruby-identifier">valeur</span>()
    <span class="ruby-identifier">score</span> = <span class="ruby-value">1.0</span><span class="ruby-operator">/</span><span class="ruby-identifier">time</span> <span class="ruby-operator">*</span> <span class="ruby-value">100000</span> <span class="ruby-operator">*</span> <span class="ruby-ivar">@taille</span>
    <span class="ruby-identifier">nbCoupParfait</span> = <span class="ruby-value">0</span>
    <span class="ruby-comment"># Si on a terminé la grille, alors les ponts présents donnent le nombre de coups idéal pour terminer la grille</span>
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">p</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@listPont</span>
        <span class="ruby-keyword">if</span>(<span class="ruby-identifier">p</span>.<span class="ruby-identifier">etatPont</span><span class="ruby-operator">&gt;</span><span class="ruby-value">0</span>)
            <span class="ruby-identifier">nbCoupParfait</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">etatPont</span>
        <span class="ruby-keyword">end</span>    
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">coupScore</span> = [<span class="ruby-ivar">@nbCoups</span><span class="ruby-operator">-</span><span class="ruby-identifier">nbCoupParfait</span>, <span class="ruby-value">0</span>].<span class="ruby-identifier">max</span>
    <span class="ruby-identifier">score</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">coupScore</span> <span class="ruby-operator">*</span> <span class="ruby-value">10</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">score</span>.<span class="ruby-identifier">to_i</span>()
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-causerVerifierGrille" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">causerVerifierGrille</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode provoquant l&#39;affichage d&#39;une fenêtre bondisante indiquant à l&#39;utilisateur si la grille est correcte</p>
          
          

          
          <div class="method-source-code" id="causerVerifierGrille-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 799</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">causerVerifierGrille</span>()
    <span class="ruby-identifier">nombre_erreurs</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">verifierGrille</span>()
    <span class="ruby-keyword">if</span>(<span class="ruby-identifier">nombre_erreurs</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>)
        <span class="ruby-identifier">finDePartie</span>()
    <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">info_verif_grille</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageDialog</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:parent</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-ivar">@fenetre</span>, <span class="ruby-value">:flags</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-value">:destroy_with_parent</span>, <span class="ruby-value">:type</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-value">:info</span>, <span class="ruby-value">:buttons</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-value">:ok</span>, <span class="ruby-value">:message</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;Grille non validée&quot;</span>)
        <span class="ruby-identifier">info_verif_grille</span>.<span class="ruby-identifier">secondary_text</span>=<span class="ruby-node">&quot;Désolé, vous n&#39;avez pas (encore) réussi votre grille. Il vous reste #{nombre_erreurs} îles incorrectement reliées.&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">info_verif_grille</span>.<span class="ruby-identifier">run</span>()
    <span class="ruby-identifier">info_verif_grille</span>.<span class="ruby-identifier">destroy</span>()
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-chargerCheckpoint" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">chargerCheckpoint</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode appelée pour mettre à jour @listPont et @listCoup avec les informations de @checkpoint et @checkpointCoups</p>
          
          

          
          <div class="method-source-code" id="chargerCheckpoint-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 1164</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">chargerCheckpoint</span>()
    <span class="ruby-keyword">if</span>(<span class="ruby-operator">!</span><span class="ruby-ivar">@checkpoint</span>.<span class="ruby-identifier">empty?</span>)
        <span class="ruby-identifier">viderGrille</span>()
        <span class="ruby-ivar">@listCoup</span> = <span class="ruby-ivar">@checkpointCoups</span>.<span class="ruby-identifier">dup</span>() <span class="ruby-comment"># La liste des coups ne se fait pas en copie profonde car on souhaite toujours avec la référence des ponts de @listPont</span>
        <span class="ruby-comment"># Mettre à jour l&#39;aspect graphique :</span>
        <span class="ruby-keyword">for</span> <span class="ruby-identifier">p</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@listPont</span>
            <span class="ruby-keyword">for</span> <span class="ruby-identifier">pc</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@checkpoint</span>
                <span class="ruby-keyword">if</span>(<span class="ruby-identifier">p</span>.<span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">pc</span>))
                    <span class="ruby-keyword">while</span>(<span class="ruby-identifier">p</span>.<span class="ruby-identifier">etatPont</span><span class="ruby-operator">!=</span><span class="ruby-identifier">pc</span>.<span class="ruby-identifier">etatPont</span>)
                        <span class="ruby-identifier">p</span>.<span class="ruby-identifier">prochainEtat</span>()
                    <span class="ruby-keyword">end</span>
                    <span class="ruby-keyword">break</span>
                <span class="ruby-keyword">end</span>    
            <span class="ruby-keyword">end</span>
            <span class="ruby-keyword">if</span>(<span class="ruby-identifier">p</span>.<span class="ruby-identifier">etatPont</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>)
                <span class="ruby-identifier">majGraphique</span>(<span class="ruby-identifier">p</span>)
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">majGraphiqueIles</span>()
    <span class="ruby-keyword">end</span>    
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-estVide-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">estVide?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode qui permet de savoir si la grille est vide (tous les ponts à zéro)</p>
          
          

          
          <div class="method-source-code" id="estVide-3F-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 838</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">estVide?</span>()
    <span class="ruby-ivar">@listPont</span>.<span class="ruby-identifier">each</span>() <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">if</span>(<span class="ruby-identifier">p</span>.<span class="ruby-identifier">etatPont</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>)
            <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
        <span class="ruby-keyword">end</span>    
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-evoluerNbCoups" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">evoluerNbCoups</span><span
            class="method-args">(nb)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode qui permet de faire avancer de nb le nombre de coups (impacte l&#39;affichage). </p>
<ul><li>
<p><code>nb</code> - le nombre de coups à ajouter</p>
</li></ul>
          
          

          
          <div class="method-source-code" id="evoluerNbCoups-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 507</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">evoluerNbCoups</span>(<span class="ruby-identifier">nb</span>)
    <span class="ruby-ivar">@nbCoups</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">nb</span>
    <span class="ruby-ivar">@coupsText</span>.<span class="ruby-identifier">text</span> = <span class="ruby-node">&quot;#{@nbCoups}&quot;</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-genererAide" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">genererAide</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode générant une aide</p>
          
          

          
          <div class="method-source-code" id="genererAide-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 605</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">genererAide</span>()
    <span class="ruby-ivar">@conseil</span> = <span class="ruby-ivar">@aide</span>.<span class="ruby-identifier">genereConseil</span>()
    <span class="ruby-ivar">@bufferConseils</span>.<span class="ruby-identifier">text</span> = <span class="ruby-ivar">@conseil</span>.<span class="ruby-identifier">texte</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-genererMap" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">genererMap</span><span
            class="method-args">(difficulte, taille)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode qui génére un path de map aux caractéristiques choisies en paramètres. </p>
<ul><li>
<p><code>difficulte</code> [String] - La difficulté de la map (facile, moyenne, difficile)</p>
</li><li>
<p><code>taille</code> [Integer/String] - La taille de la map</p>
</li></ul>
          
          

          
          <div class="method-source-code" id="genererMap-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 219</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">genererMap</span>(<span class="ruby-identifier">difficulte</span>, <span class="ruby-identifier">taille</span>)
    <span class="ruby-identifier">repertoire</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;../res/grilles/#{difficulte}/#{taille}&quot;</span>)
    <span class="ruby-identifier">nbEntree</span> = <span class="ruby-value">-2</span>
    <span class="ruby-identifier">repertoire</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">nbEntree</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span>}

    <span class="ruby-keyword">if</span>(<span class="ruby-identifier">nbEntree</span><span class="ruby-operator">&gt;</span><span class="ruby-value">0</span>)
        <span class="ruby-identifier">numero</span> = <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">nbEntree</span>)<span class="ruby-value">+1</span>
        <span class="ruby-identifier">repertoire</span>.<span class="ruby-identifier">close</span>
        <span class="ruby-keyword">return</span> <span class="ruby-node">&quot;../res/grilles/#{difficulte}/#{taille}/#{numero}&quot;</span>
    <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Grille introuvable !&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-getMode" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">getMode</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode pour connaître le type de partie. Retourne 0.</p>
          
          

          
          <div class="method-source-code" id="getMode-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 87</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">getMode</span>()
    <span class="ruby-keyword">return</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-majGraphique" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">majGraphique</span><span
            class="method-args">(p)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode appelée pour mettre à jour les graphismes d&#39;un pont</p>
<ul><li>
<p><code>p</code> [Pont] - le pont dont l&#39;image doit être mise à jour</p>
</li></ul>
          
          

          
          <div class="method-source-code" id="majGraphique-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 1189</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">majGraphique</span>(<span class="ruby-identifier">p</span>)
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">c</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">tabCases</span>
        <span class="ruby-identifier">imgP</span> = <span class="ruby-keyword">nil</span>
        <span class="ruby-identifier">theme</span> = <span class="ruby-constant">Theme</span>.<span class="ruby-identifier">isClair?</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&quot;w&quot;</span>
        <span class="ruby-keyword">if</span>(<span class="ruby-identifier">p</span>.<span class="ruby-identifier">etatPont</span><span class="ruby-operator">==</span><span class="ruby-value">1</span>)
            <span class="ruby-keyword">if</span>(<span class="ruby-identifier">p</span>.<span class="ruby-identifier">sens?</span>)
                <span class="ruby-identifier">imgP</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Image</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:file</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;../res/img/sph#{theme}.svg&quot;</span>) <span class="ruby-comment"># Image d&#39;un pont simple horizontal</span>
                
            <span class="ruby-keyword">else</span>
                <span class="ruby-identifier">imgP</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Image</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:file</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;../res/img/spv#{theme}.svg&quot;</span>) <span class="ruby-comment"># Image d&#39;un pont simple vertical</span>
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">elsif</span>(<span class="ruby-identifier">p</span>.<span class="ruby-identifier">etatPont</span> <span class="ruby-operator">==</span> <span class="ruby-value">2</span>)
            <span class="ruby-keyword">if</span>(<span class="ruby-identifier">p</span>.<span class="ruby-identifier">sens?</span>)
                <span class="ruby-identifier">imgP</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Image</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:file</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;../res/img/dph#{theme}.svg&quot;</span>) <span class="ruby-comment"># Image d&#39;un pont double horizontal</span>
            <span class="ruby-keyword">else</span>
                <span class="ruby-identifier">imgP</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Image</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:file</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;../res/img/dpv#{theme}.svg&quot;</span>) <span class="ruby-comment"># Image d&#39;un pont double vertical</span>
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">if</span>(<span class="ruby-identifier">imgP</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>) 
            <span class="ruby-identifier">imgP</span>.<span class="ruby-identifier">pixbuf</span>=<span class="ruby-identifier">imgP</span>.<span class="ruby-identifier">pixbuf</span>.<span class="ruby-identifier">scale_simple</span>(<span class="ruby-ivar">@tailleImg</span>, <span class="ruby-ivar">@tailleImg</span>, <span class="ruby-constant">GdkPixbuf</span><span class="ruby-operator">::</span><span class="ruby-constant">InterpType</span><span class="ruby-operator">::</span><span class="ruby-constant">BILINEAR</span>) 
        <span class="ruby-keyword">end</span>
        <span class="ruby-comment"># Destruction de l&#39;image anciennement sur le bouton, s&#39;il y en avait une</span>
        <span class="ruby-identifier">detruireImage</span>(<span class="ruby-ivar">@grilleBT</span>[<span class="ruby-identifier">c</span>.<span class="ruby-identifier">positionX</span>][<span class="ruby-identifier">c</span>.<span class="ruby-identifier">positionY</span>].<span class="ruby-identifier">image</span>)
        <span class="ruby-ivar">@grilleBT</span>[<span class="ruby-identifier">c</span>.<span class="ruby-identifier">positionX</span>][<span class="ruby-identifier">c</span>.<span class="ruby-identifier">positionY</span>].<span class="ruby-identifier">set_image</span>(<span class="ruby-identifier">imgP</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-majGraphiqueIles" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">majGraphiqueIles</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode qui permet de mettre à jour la couleur des îles en fonction des ponts qui lui sont reliées</p>
          
          

          
          <div class="method-source-code" id="majGraphiqueIles-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 1218</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">majGraphiqueIles</span>()
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@listIle</span>
        <span class="ruby-keyword">if</span>(<span class="ruby-identifier">i</span>.<span class="ruby-identifier">verifierNombreDePont</span>)
            <span class="ruby-ivar">@grilleBT</span>[<span class="ruby-identifier">i</span>.<span class="ruby-identifier">positionX</span>][<span class="ruby-identifier">i</span>.<span class="ruby-identifier">positionY</span>].<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_grille_valide&quot;</span>
        <span class="ruby-keyword">elsif</span>(<span class="ruby-identifier">i</span>.<span class="ruby-identifier">getNbPonts</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">valeur</span>)
            <span class="ruby-ivar">@grilleBT</span>[<span class="ruby-identifier">i</span>.<span class="ruby-identifier">positionX</span>][<span class="ruby-identifier">i</span>.<span class="ruby-identifier">positionY</span>].<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_grille_invalide&quot;</span>
        <span class="ruby-keyword">else</span>
            <span class="ruby-ivar">@grilleBT</span>[<span class="ruby-identifier">i</span>.<span class="ruby-identifier">positionX</span>][<span class="ruby-identifier">i</span>.<span class="ruby-identifier">positionY</span>].<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_grille_ile&quot;</span>
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span>(<span class="ruby-ivar">@conseilAffiche</span>)
        <span class="ruby-keyword">for</span> <span class="ruby-identifier">c</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@conseil</span>.<span class="ruby-identifier">listeDesIlesConcernees</span>
            <span class="ruby-ivar">@grilleBT</span>[<span class="ruby-identifier">c</span>.<span class="ruby-identifier">positionX</span>][<span class="ruby-identifier">c</span>.<span class="ruby-identifier">positionY</span>].<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_grille_highlighted&quot;</span>
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-modifierPont" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">modifierPont</span><span
            class="method-args">(p,undo)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode permettant de modifier un <a href="Pont.html"><code>Pont</code></a> (vérifie si c&#39;est autorisé, renvoie le booléen d&#39;autorisation de la création du pont)</p>
<ul><li>
<p><code>p</code> [Pont] - Le <a href="Pont.html"><code>Pont</code></a> à modifier</p>
</li><li>
<p><code>undo</code> [Boolean] - Si appelé avec la méthode undo</p>
</li></ul>
          
          

          
          <div class="method-source-code" id="modifierPont-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 516</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">modifierPont</span>(<span class="ruby-identifier">p</span>,<span class="ruby-identifier">undo</span>)
    <span class="ruby-identifier">autorise</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-comment"># Passer en revue les cases changées pour possiblement empêcher le changement :</span>
    <span class="ruby-keyword">if</span>(<span class="ruby-identifier">p</span>.<span class="ruby-identifier">etatPont</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>) <span class="ruby-comment"># Si le pont que l&#39;on veut changer doit apparaître, on doit tester si aucun autre pont nous gêne</span>
        <span class="ruby-comment"># On parcourt toutes les cases de tous les ponts pour voir les cases communes avec d&#39;autres ponts.</span>
        <span class="ruby-keyword">for</span> <span class="ruby-identifier">c</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">tabCases</span>
            <span class="ruby-keyword">for</span> <span class="ruby-identifier">autre</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@listPont</span>
                <span class="ruby-keyword">for</span> <span class="ruby-identifier">cautre</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">autre</span>.<span class="ruby-identifier">tabCases</span>
                    <span class="ruby-keyword">if</span>(<span class="ruby-identifier">autorise</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">autre</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">p</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">autre</span>.<span class="ruby-identifier">etatPont</span> <span class="ruby-operator">!=</span><span class="ruby-value">0</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">positionX</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">cautre</span>.<span class="ruby-identifier">positionX</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">positionY</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">cautre</span>.<span class="ruby-identifier">positionY</span>) <span class="ruby-comment">#Une case est en commun et le pont en question est actif</span>
                        <span class="ruby-identifier">autorise</span> = <span class="ruby-keyword">false</span>
                    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    
    <span class="ruby-keyword">if</span>(<span class="ruby-identifier">autorise</span>)
        <span class="ruby-keyword">if</span>(<span class="ruby-operator">!</span><span class="ruby-identifier">undo</span>)
            <span class="ruby-ivar">@listReDo</span>.<span class="ruby-identifier">clear</span>()
        <span class="ruby-keyword">end</span>
        <span class="ruby-comment"># Changement d&#39;état du pont car autorisé :</span>
        <span class="ruby-identifier">etat</span> = <span class="ruby-identifier">p</span>.<span class="ruby-identifier">prochainEtat</span>()
        <span class="ruby-comment"># Evolution du nombre de coups</span>
        <span class="ruby-identifier">evoluerNbCoups</span>(<span class="ruby-value">1</span>)
        <span class="ruby-comment"># Modifier les boutons correspondant aux cases changées :</span>
        <span class="ruby-identifier">majGraphique</span>(<span class="ruby-identifier">p</span>)
        <span class="ruby-keyword">if</span>(<span class="ruby-operator">!</span><span class="ruby-identifier">undo</span>)
            <span class="ruby-ivar">@listCoup</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">p</span>
            <span class="ruby-ivar">@undoBouton</span>.<span class="ruby-identifier">sensitive</span> = <span class="ruby-keyword">true</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">majGraphiqueIles</span>()    
        <span class="ruby-keyword">if</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">verifierGrille</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>) <span class="ruby-comment"># Ce nouveau coup a permis d&#39;avoir la grille résolue !</span>
            <span class="ruby-keyword">self</span>.<span class="ruby-identifier">finDePartie</span>()
        <span class="ruby-keyword">end</span> 
        <span class="ruby-keyword">if</span>(<span class="ruby-operator">!</span><span class="ruby-identifier">estVide?</span>)
            <span class="ruby-ivar">@viderBouton</span>.<span class="ruby-identifier">sensitive</span> = <span class="ruby-keyword">true</span>
        <span class="ruby-keyword">end</span>    
    <span class="ruby-keyword">end</span>  

    <span class="ruby-keyword">return</span> <span class="ruby-identifier">autorise</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-puisJeCreerPont" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">puisJeCreerPont</span><span
            class="method-args">(p)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode indiquant si un pont existe déjà</p>
<ul><li>
<p><code>p</code> [Pont] - Le pont dont on vérifie la présence dans la liste de ponts</p>
</li></ul>
          
          

          
          <div class="method-source-code" id="puisJeCreerPont-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 765</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">puisJeCreerPont</span>(<span class="ruby-identifier">p</span>)
    <span class="ruby-ivar">@listPont</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p2</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">if</span>(<span class="ruby-identifier">p2</span>.<span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">p</span>))
            <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
        <span class="ruby-keyword">end</span>
    }
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-reDo" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reDo</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode appelée lorsqu&#39;on souhaite refaire un coup</p>
          
          

          
          <div class="method-source-code" id="reDo-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 1143</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">reDo</span>()
    <span class="ruby-keyword">if</span>(<span class="ruby-operator">!</span><span class="ruby-ivar">@listReDo</span>.<span class="ruby-identifier">empty?</span>)
        <span class="ruby-identifier">dernierCoup</span> = <span class="ruby-ivar">@listReDo</span>.<span class="ruby-identifier">pop</span>()
        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">modifierPont</span>(<span class="ruby-identifier">dernierCoup</span>,<span class="ruby-keyword">true</span>)
        <span class="ruby-ivar">@listCoup</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">dernierCoup</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-retourInGame" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">retourInGame</span><span
            class="method-args">(tempsEcoule)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode permettant de retourner à la partie depuis le menu in-game</p>
<ul><li>
<p><code>tempsEcoule</code> [Integer] - le temps dans le chrono au moment d&#39;entrer dans le menu</p>
</li></ul>
          
          

          
          <div class="method-source-code" id="retourInGame-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 1040</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">retourInGame</span>(<span class="ruby-identifier">tempsEcoule</span>)
    <span class="ruby-ivar">@fenetre</span>.<span class="ruby-identifier">remove</span>(<span class="ruby-ivar">@inGameMenu</span>)
    <span class="ruby-ivar">@fenetre</span>.<span class="ruby-identifier">add</span>(<span class="ruby-ivar">@hbox</span>)
    <span class="ruby-identifier">majGraphiqueIles</span>()
    <span class="ruby-ivar">@timer</span> = <span class="ruby-constant">Chrono</span>.<span class="ruby-identifier">creer</span>(<span class="ruby-identifier">tempsEcoule</span>)
    <span class="ruby-ivar">@timer</span>.<span class="ruby-identifier">startChrono</span>()
    <span class="ruby-identifier">afficherChrono</span>()
    <span class="ruby-ivar">@fenetre</span>.<span class="ruby-identifier">show_all</span>()
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-sauvegarderCheckpoint" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">sauvegarderCheckpoint</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode appelée pour mettre à jour @checkpoint et @checkpointCoups avec les informations de @listPont et @listCoup</p>
          
          

          
          <div class="method-source-code" id="sauvegarderCheckpoint-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 1153</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">sauvegarderCheckpoint</span>()
    <span class="ruby-ivar">@checkpoint</span>.<span class="ruby-identifier">clear</span>()
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">p</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@listPont</span>
        <span class="ruby-identifier">pc</span> = <span class="ruby-constant">Pont</span>.<span class="ruby-identifier">creer</span>(<span class="ruby-identifier">p</span>.<span class="ruby-identifier">tabCases</span>, <span class="ruby-identifier">p</span>.<span class="ruby-identifier">iD</span>, <span class="ruby-identifier">p</span>.<span class="ruby-identifier">iA</span>, <span class="ruby-identifier">p</span>.<span class="ruby-identifier">etatPont</span>)
        <span class="ruby-ivar">@checkpoint</span>.<span class="ruby-identifier">append</span>(<span class="ruby-identifier">pc</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@checkpointCoups</span> = <span class="ruby-ivar">@listCoup</span>.<span class="ruby-identifier">dup</span>() <span class="ruby-comment"># La liste des coups ne se fait pas en copie profonde car on souhaite toujours avec la référence des ponts de @listPont</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-unDo" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">unDo</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode appelée lorsqu&#39;on souhaite défaire un coup (retiré de la liste des coups et ajouté à la liste de redo)</p>
          
          

          
          <div class="method-source-code" id="unDo-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 1131</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">unDo</span>()
    <span class="ruby-keyword">if</span>(<span class="ruby-operator">!</span><span class="ruby-ivar">@listCoup</span>.<span class="ruby-identifier">empty?</span>)
        <span class="ruby-identifier">dernierCoup</span> = <span class="ruby-ivar">@listCoup</span>.<span class="ruby-identifier">pop</span>()
        <span class="ruby-comment">#Refait le cycle du pont, pour annuler le coup</span>
        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">modifierPont</span>(<span class="ruby-identifier">dernierCoup</span>,<span class="ruby-keyword">true</span>)
        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">modifierPont</span>(<span class="ruby-identifier">dernierCoup</span>,<span class="ruby-keyword">true</span>)
        <span class="ruby-ivar">@listReDo</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">dernierCoup</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-verifierGrille" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">verifierGrille</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode vérifiant la grille, renvoie un entier</p>

<p>Return un entier correspondant au nombre d&#39;îles incorrectement reliées</p>
          
          

          
          <div class="method-source-code" id="verifierGrille-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 788</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">verifierGrille</span>()
    <span class="ruby-identifier">ilesIncorrectes</span> = <span class="ruby-value">0</span>
    <span class="ruby-ivar">@listIle</span>.<span class="ruby-identifier">each</span>() <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">if</span>(<span class="ruby-operator">!</span><span class="ruby-identifier">i</span>.<span class="ruby-identifier">estCorrectementReliee</span>())
            <span class="ruby-identifier">ilesIncorrectes</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">ilesIncorrectes</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-viderGrille" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">viderGrille</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode vidant la grille, en retirant tous les ponts</p>
          
          

          
          <div class="method-source-code" id="viderGrille-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 822</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">viderGrille</span>()
    <span class="ruby-ivar">@listPont</span>.<span class="ruby-identifier">each</span>() <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">if</span>(<span class="ruby-identifier">p</span>.<span class="ruby-identifier">etatPont</span><span class="ruby-operator">&gt;</span><span class="ruby-value">0</span>)
            <span class="ruby-identifier">p</span>.<span class="ruby-identifier">reset</span>(<span class="ruby-keyword">true</span>)
            <span class="ruby-identifier">majGraphique</span>(<span class="ruby-identifier">p</span>)
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@listCoup</span>.<span class="ruby-identifier">clear</span>()
    <span class="ruby-ivar">@listReDo</span>.<span class="ruby-identifier">clear</span>()
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@listIle</span>
        <span class="ruby-ivar">@grilleBT</span>[<span class="ruby-identifier">i</span>.<span class="ruby-identifier">positionX</span>][<span class="ruby-identifier">i</span>.<span class="ruby-identifier">positionY</span>].<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_grille_ile&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="private-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Private Instance Methods</h3>
       </header>

    
      <div id="method-i-creationBoutonsDeLInterface" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">creationBoutonsDeLInterface</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode qui gère les boutons de l&#39;interface et l&#39;ajout aux différents conteneurs pour créer l&#39;interface graphique</p>
          
          

          
          <div class="method-source-code" id="creationBoutonsDeLInterface-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 264</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">creationBoutonsDeLInterface</span>() <span class="ruby-comment">#:doc:</span>
    <span class="ruby-comment"># Informations contenues dans hboxInfos :</span>

    <span class="ruby-comment"># Bouton d&#39;affichage du menu in-game :</span>
    <span class="ruby-identifier">menu</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Button</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:label</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;Menu&quot;</span>)
    <span class="ruby-identifier">menu</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_interface&quot;</span>
    <span class="ruby-identifier">menu</span>.<span class="ruby-identifier">signal_connect</span>(<span class="ruby-string">&#39;clicked&#39;</span>){
        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">afficherMenu</span>()
    }

    <span class="ruby-comment"># Espace pour le chrono :</span>
    <span class="ruby-identifier">chronoBox</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Box</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:vertical</span>, <span class="ruby-identifier">spacing</span>=<span class="ruby-value">5</span>)
    <span class="ruby-identifier">chronoLabel</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Label</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Chrono&quot;</span>, {<span class="ruby-value">:use_underline</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">false</span>}).<span class="ruby-identifier">set_single_line_mode</span>(<span class="ruby-keyword">true</span>)
    <span class="ruby-identifier">chronoLabel</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;lbl_interface&quot;</span>
    <span class="ruby-ivar">@chronoText</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Label</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;00:00&quot;</span>, {<span class="ruby-value">:use_underline</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">false</span>}).<span class="ruby-identifier">set_single_line_mode</span>(<span class="ruby-keyword">true</span>)
    <span class="ruby-ivar">@chronoText</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;lbl_interface_gras&quot;</span>
    <span class="ruby-identifier">chronoBox</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">chronoLabel</span>)
    <span class="ruby-identifier">chronoBox</span>.<span class="ruby-identifier">add</span>(<span class="ruby-ivar">@chronoText</span>)

    <span class="ruby-comment"># Espace pour le nombre de coups :</span>
    <span class="ruby-identifier">coupsBox</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Box</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:vertical</span>, <span class="ruby-identifier">spacing</span>=<span class="ruby-value">5</span>)
    <span class="ruby-identifier">coupsLabel</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Label</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Coups&quot;</span>, {<span class="ruby-value">:use_underline</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">false</span>}).<span class="ruby-identifier">set_single_line_mode</span>(<span class="ruby-keyword">true</span>)
    <span class="ruby-identifier">coupsLabel</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;lbl_interface&quot;</span>
    <span class="ruby-ivar">@coupsText</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Label</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;#{@nbCoups}&quot;</span>, {<span class="ruby-value">:use_underline</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">false</span>}).<span class="ruby-identifier">set_single_line_mode</span>(<span class="ruby-keyword">true</span>)
    <span class="ruby-ivar">@coupsText</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;lbl_interface_gras&quot;</span>
    <span class="ruby-identifier">coupsBox</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">coupsLabel</span>)
    <span class="ruby-identifier">coupsBox</span>.<span class="ruby-identifier">add</span>(<span class="ruby-ivar">@coupsText</span>)

    <span class="ruby-comment"># Espace pour la difficulté :</span>
    <span class="ruby-identifier">difficulteBox</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Box</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:vertical</span>, <span class="ruby-identifier">spacing</span>=<span class="ruby-value">5</span>)
    <span class="ruby-identifier">difficulteLabel</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Label</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Difficulté&quot;</span>, {<span class="ruby-value">:use_underline</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">false</span>}).<span class="ruby-identifier">set_single_line_mode</span>(<span class="ruby-keyword">true</span>)
    <span class="ruby-identifier">difficulteLabel</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;lbl_interface&quot;</span>
    <span class="ruby-identifier">difficulteInfo</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Label</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;#{@difficulte}&quot;</span>, {<span class="ruby-value">:use_underline</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">false</span>}).<span class="ruby-identifier">set_single_line_mode</span>(<span class="ruby-keyword">true</span>)
    <span class="ruby-identifier">difficulteInfo</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;lbl_interface_italic&quot;</span>
    <span class="ruby-identifier">difficulteBox</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">difficulteLabel</span>)
    <span class="ruby-identifier">difficulteBox</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">difficulteInfo</span>)

    <span class="ruby-comment"># Espace pour la taille :</span>
    <span class="ruby-identifier">tailleBox</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Box</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:vertical</span>, <span class="ruby-identifier">spacing</span>=<span class="ruby-value">5</span>)
    <span class="ruby-identifier">tailleLabel</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Label</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Taille&quot;</span>, {<span class="ruby-value">:use_underline</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">false</span>}).<span class="ruby-identifier">set_single_line_mode</span>(<span class="ruby-keyword">true</span>)
    <span class="ruby-identifier">tailleLabel</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;lbl_interface&quot;</span>
    <span class="ruby-identifier">tailleInfo</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Label</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;#{@taille}x#{@taille}&quot;</span>, {<span class="ruby-value">:use_underline</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">false</span>}).<span class="ruby-identifier">set_single_line_mode</span>(<span class="ruby-keyword">true</span>)
    <span class="ruby-identifier">tailleInfo</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;lbl_interface&quot;</span>
    <span class="ruby-identifier">tailleBox</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">tailleLabel</span>)
    <span class="ruby-identifier">tailleBox</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">tailleInfo</span>)

    <span class="ruby-comment"># HBOX qui va contenir les informations sur la partie et le menu</span>
    <span class="ruby-ivar">@hboxInfos</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Box</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:horizontal</span>, <span class="ruby-identifier">spacing</span>=<span class="ruby-value">20</span>)
    <span class="ruby-ivar">@hboxInfos</span>.<span class="ruby-identifier">homogeneous</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-ivar">@hboxInfos</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">menu</span>)
    <span class="ruby-ivar">@hboxInfos</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">chronoBox</span>)
    <span class="ruby-ivar">@hboxInfos</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">coupsBox</span>)
    <span class="ruby-ivar">@hboxInfos</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">difficulteBox</span>)
    <span class="ruby-ivar">@hboxInfos</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">tailleBox</span>)

    <span class="ruby-comment"># VBOX qui va contenir la grille de hashi et les informations présentes au-dessus</span>
    <span class="ruby-ivar">@vboxGauche</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Box</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:vertical</span>, <span class="ruby-identifier">spacing</span>=<span class="ruby-value">40</span>)
    <span class="ruby-ivar">@vboxGauche</span>.<span class="ruby-identifier">homogeneous</span>=<span class="ruby-keyword">false</span>
    <span class="ruby-ivar">@vboxGauche</span>.<span class="ruby-identifier">add</span>(<span class="ruby-ivar">@hboxInfos</span>)
    <span class="ruby-ivar">@vboxGauche</span>.<span class="ruby-identifier">add</span>(<span class="ruby-ivar">@grid</span>)
    
    <span class="ruby-comment"># HBOX qui va contenir la partie gauche et droite de l&#39;interface</span>
    <span class="ruby-ivar">@hbox</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Box</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:horizontal</span>, <span class="ruby-identifier">spacing</span>=<span class="ruby-value">50</span>)
    <span class="ruby-ivar">@hbox</span>.<span class="ruby-identifier">homogeneous</span>=<span class="ruby-keyword">false</span>
    <span class="ruby-ivar">@hbox</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;box_contenu&quot;</span>
    <span class="ruby-ivar">@hbox</span>.<span class="ruby-identifier">add</span>(<span class="ruby-ivar">@vboxGauche</span>)

    <span class="ruby-comment"># Conteneurs pour les boutons de l&#39;interface à droite</span>
    <span class="ruby-ivar">@gridInterface</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Grid</span>.<span class="ruby-identifier">new</span>()
    <span class="ruby-ivar">@gridInterface</span>.<span class="ruby-identifier">column_homogeneous</span>=<span class="ruby-keyword">true</span>
    <span class="ruby-ivar">@gridInterface</span>.<span class="ruby-identifier">row_homogeneous</span>=<span class="ruby-keyword">true</span>
    <span class="ruby-ivar">@gridInterface</span>.<span class="ruby-identifier">row_spacing</span>=<span class="ruby-value">25</span>
    <span class="ruby-ivar">@gridInterface</span>.<span class="ruby-identifier">column_spacing</span>=<span class="ruby-value">10</span>

    <span class="ruby-comment"># Bouton montrer un conseil</span>
    <span class="ruby-identifier">montrerConseil</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Button</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:label</span> <span class="ruby-operator">=&gt;</span><span class="ruby-string">&quot;Montrer&quot;</span>)
    <span class="ruby-identifier">montrerConseil</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_interface&quot;</span>
    <span class="ruby-identifier">montrerConseil</span>.<span class="ruby-identifier">sensitive</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-identifier">montrerConseil</span>.<span class="ruby-identifier">signal_connect</span>(<span class="ruby-string">&#39;clicked&#39;</span>){
        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">afficherAide</span>()
        <span class="ruby-keyword">if</span>(<span class="ruby-ivar">@conseilAffiche</span>)
            <span class="ruby-identifier">montrerConseil</span>.<span class="ruby-identifier">label</span> = <span class="ruby-string">&quot;Enlever&quot;</span>
        <span class="ruby-keyword">else</span>
            <span class="ruby-identifier">montrerConseil</span>.<span class="ruby-identifier">label</span> = <span class="ruby-string">&quot;Montrer&quot;</span>
        <span class="ruby-keyword">end</span>
    }

    <span class="ruby-comment"># Bouton générer un conseil</span>
    <span class="ruby-identifier">genererConseil</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Button</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:label</span> <span class="ruby-operator">=&gt;</span><span class="ruby-string">&quot;Générer un conseil&quot;</span>)
    <span class="ruby-identifier">genererConseil</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_interface&quot;</span>
    <span class="ruby-identifier">genererConseil</span>.<span class="ruby-identifier">signal_connect</span>(<span class="ruby-string">&#39;clicked&#39;</span>){
        <span class="ruby-keyword">if</span>(<span class="ruby-ivar">@conseilAffiche</span>)
            <span class="ruby-keyword">self</span>.<span class="ruby-identifier">afficherAide</span>()
            <span class="ruby-identifier">montrerConseil</span>.<span class="ruby-identifier">label</span> = <span class="ruby-string">&quot;Montrer&quot;</span>
        <span class="ruby-keyword">end</span>    
        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">genererAide</span>()
        <span class="ruby-keyword">if</span>(<span class="ruby-ivar">@conseil</span>.<span class="ruby-identifier">nbIlesConcernees</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>)
            <span class="ruby-identifier">montrerConseil</span>.<span class="ruby-identifier">sensitive</span> = <span class="ruby-keyword">false</span> <span class="ruby-comment"># Pas de conseil trouvé, on ne peut donc pas les montrer</span>
        <span class="ruby-keyword">else</span>
            <span class="ruby-identifier">montrerConseil</span>.<span class="ruby-identifier">sensitive</span> = <span class="ruby-keyword">true</span>
        <span class="ruby-keyword">end</span>
    }

    <span class="ruby-comment"># Bouton règles du jeu</span>
    <span class="ruby-identifier">reglesDuJeu</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Button</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:label</span> <span class="ruby-operator">=&gt;</span><span class="ruby-string">&quot;Règles du jeu&quot;</span>)
    <span class="ruby-identifier">reglesDuJeu</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_interface&quot;</span>
    <span class="ruby-identifier">reglesDuJeu</span>.<span class="ruby-identifier">signal_connect</span>(<span class="ruby-string">&#39;clicked&#39;</span>){
        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">afficherRegles</span>()
    }

    <span class="ruby-comment"># Bouton vérification de la grille</span>
    <span class="ruby-identifier">verification</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Button</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:label</span> <span class="ruby-operator">=&gt;</span><span class="ruby-string">&quot;Vérification de la grille&quot;</span>)
    <span class="ruby-identifier">verification</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_interface&quot;</span>
    <span class="ruby-identifier">verification</span>.<span class="ruby-identifier">signal_connect</span>(<span class="ruby-string">&#39;clicked&#39;</span>){
        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">causerVerifierGrille</span>()
    }

    <span class="ruby-comment"># Bouton vider la grille</span>
    <span class="ruby-ivar">@viderBouton</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Button</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:label</span> <span class="ruby-operator">=&gt;</span><span class="ruby-string">&quot;Vider la grille&quot;</span>)
    <span class="ruby-ivar">@viderBouton</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_interface&quot;</span>
    <span class="ruby-ivar">@viderBouton</span>.<span class="ruby-identifier">sensitive</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-ivar">@viderBouton</span>.<span class="ruby-identifier">signal_connect</span>(<span class="ruby-string">&#39;clicked&#39;</span>){
        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">viderGrille</span>()
        <span class="ruby-keyword">if</span>(<span class="ruby-identifier">estVide?</span>)
            <span class="ruby-ivar">@undoBouton</span>.<span class="ruby-identifier">sensitive</span> = <span class="ruby-keyword">false</span>
            <span class="ruby-ivar">@redoBouton</span>.<span class="ruby-identifier">sensitive</span> = <span class="ruby-keyword">false</span>
            <span class="ruby-ivar">@viderBouton</span>.<span class="ruby-identifier">sensitive</span> = <span class="ruby-keyword">false</span>
        <span class="ruby-keyword">end</span>
    }

    <span class="ruby-comment"># Bouton UNDO</span>
    <span class="ruby-ivar">@undoBouton</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Button</span>.<span class="ruby-identifier">new</span>()
    <span class="ruby-identifier">imageUndo</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Image</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:file</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;../res/img/undo.svg&quot;</span>)
    <span class="ruby-identifier">imageUndo</span>.<span class="ruby-identifier">pixbuf</span>=<span class="ruby-identifier">imageUndo</span>.<span class="ruby-identifier">pixbuf</span>.<span class="ruby-identifier">scale_simple</span>(<span class="ruby-value">50</span>, <span class="ruby-value">50</span>, <span class="ruby-constant">GdkPixbuf</span><span class="ruby-operator">::</span><span class="ruby-constant">InterpType</span><span class="ruby-operator">::</span><span class="ruby-constant">BILINEAR</span>)
    <span class="ruby-ivar">@undoBouton</span>.<span class="ruby-identifier">set_image</span>(<span class="ruby-identifier">imageUndo</span>)
    <span class="ruby-ivar">@undoBouton</span>.<span class="ruby-identifier">set_always_show_image</span>(<span class="ruby-keyword">true</span>)
    <span class="ruby-ivar">@undoBouton</span>.<span class="ruby-identifier">set_relief</span>(<span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">ReliefStyle</span><span class="ruby-operator">::</span><span class="ruby-constant">NONE</span>)
    <span class="ruby-ivar">@undoBouton</span>.<span class="ruby-identifier">sensitive</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-ivar">@undoBouton</span>.<span class="ruby-identifier">signal_connect</span>(<span class="ruby-string">&#39;clicked&#39;</span>){
        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">unDo</span>()
        <span class="ruby-keyword">if</span>(<span class="ruby-ivar">@listCoup</span>.<span class="ruby-identifier">empty?</span>)
            <span class="ruby-ivar">@undoBouton</span>.<span class="ruby-identifier">sensitive</span> = <span class="ruby-keyword">false</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">if</span>(<span class="ruby-operator">!</span><span class="ruby-ivar">@listReDo</span>.<span class="ruby-identifier">empty?</span>)
            <span class="ruby-ivar">@redoBouton</span>.<span class="ruby-identifier">sensitive</span> = <span class="ruby-keyword">true</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">if</span>(<span class="ruby-identifier">estVide?</span>)
            <span class="ruby-ivar">@viderBouton</span>.<span class="ruby-identifier">sensitive</span> = <span class="ruby-keyword">false</span>
        <span class="ruby-keyword">end</span>    
    }

    <span class="ruby-comment"># Bouton REDO</span>
    <span class="ruby-ivar">@redoBouton</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Button</span>.<span class="ruby-identifier">new</span>()
    <span class="ruby-identifier">imageRedo</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Image</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:file</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;../res/img/undo.svg&quot;</span>)
    <span class="ruby-identifier">imageRedo</span>.<span class="ruby-identifier">pixbuf</span>=<span class="ruby-identifier">imageRedo</span>.<span class="ruby-identifier">pixbuf</span>.<span class="ruby-identifier">scale_simple</span>(<span class="ruby-value">50</span>,<span class="ruby-value">50</span>, <span class="ruby-constant">GdkPixbuf</span><span class="ruby-operator">::</span><span class="ruby-constant">InterpType</span><span class="ruby-operator">::</span><span class="ruby-constant">BILINEAR</span>)
    <span class="ruby-identifier">imageRedo</span>.<span class="ruby-identifier">pixbuf</span>=<span class="ruby-identifier">imageRedo</span>.<span class="ruby-identifier">pixbuf</span>.<span class="ruby-identifier">flip</span>(<span class="ruby-keyword">true</span>)
    <span class="ruby-ivar">@redoBouton</span>.<span class="ruby-identifier">set_image</span>(<span class="ruby-identifier">imageRedo</span>)
    <span class="ruby-ivar">@redoBouton</span>.<span class="ruby-identifier">set_always_show_image</span>(<span class="ruby-keyword">true</span>)
    <span class="ruby-ivar">@redoBouton</span>.<span class="ruby-identifier">set_relief</span>(<span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">ReliefStyle</span><span class="ruby-operator">::</span><span class="ruby-constant">NONE</span>)
    <span class="ruby-ivar">@redoBouton</span>.<span class="ruby-identifier">sensitive</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-ivar">@redoBouton</span>.<span class="ruby-identifier">signal_connect</span>(<span class="ruby-string">&#39;clicked&#39;</span>){
        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">reDo</span>()
        <span class="ruby-keyword">if</span>(<span class="ruby-ivar">@listReDo</span>.<span class="ruby-identifier">empty?</span>)
            <span class="ruby-ivar">@redoBouton</span>.<span class="ruby-identifier">sensitive</span> = <span class="ruby-keyword">false</span>
        <span class="ruby-keyword">end</span> 
        <span class="ruby-keyword">if</span>(<span class="ruby-operator">!</span><span class="ruby-ivar">@listCoup</span>.<span class="ruby-identifier">empty?</span>)   
            <span class="ruby-ivar">@undoBouton</span>.<span class="ruby-identifier">sensitive</span> = <span class="ruby-keyword">true</span>
        <span class="ruby-keyword">end</span> 
        <span class="ruby-keyword">if</span>(<span class="ruby-identifier">estVide?</span>)
            <span class="ruby-ivar">@viderBouton</span>.<span class="ruby-identifier">sensitive</span> = <span class="ruby-keyword">false</span>
        <span class="ruby-keyword">end</span>     
    }

    <span class="ruby-comment"># Bouton charger le checkpoint</span>
    <span class="ruby-identifier">chargerBouton</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Button</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:label</span> <span class="ruby-operator">=&gt;</span><span class="ruby-string">&quot;Charger&quot;</span>)
    <span class="ruby-identifier">chargerBouton</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_interface&quot;</span>
    <span class="ruby-identifier">chargerBouton</span>.<span class="ruby-identifier">sensitive</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-identifier">chargerBouton</span>.<span class="ruby-identifier">signal_connect</span>(<span class="ruby-string">&#39;clicked&#39;</span>){
        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">chargerCheckpoint</span>()
        <span class="ruby-keyword">if</span>(<span class="ruby-operator">!</span><span class="ruby-identifier">estVide?</span>)
            <span class="ruby-ivar">@viderBouton</span>.<span class="ruby-identifier">sensitive</span> = <span class="ruby-keyword">true</span>
        <span class="ruby-keyword">end</span>    
    }

    <span class="ruby-comment"># Bouton sauvegarder le checkpoint</span>
    <span class="ruby-identifier">sauvegarderBouton</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Button</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:label</span> <span class="ruby-operator">=&gt;</span><span class="ruby-string">&quot;Sauvegarder&quot;</span>)
    <span class="ruby-identifier">sauvegarderBouton</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_interface&quot;</span>
    <span class="ruby-identifier">sauvegarderBouton</span>.<span class="ruby-identifier">signal_connect</span>(<span class="ruby-string">&#39;clicked&#39;</span>){
        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">sauvegarderCheckpoint</span>()
        <span class="ruby-identifier">chargerBouton</span>.<span class="ruby-identifier">sensitive</span> = <span class="ruby-keyword">true</span>
    }

    <span class="ruby-comment"># Espace d&#39;affichage de l&#39;aide textuelle</span>
    <span class="ruby-identifier">espaceConseilsText</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">TextView</span>.<span class="ruby-identifier">new</span>()
    <span class="ruby-identifier">espaceConseilsText</span>.<span class="ruby-identifier">editable</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-identifier">espaceConseilsText</span>.<span class="ruby-identifier">cursor_visible</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-identifier">espaceConseilsText</span>.<span class="ruby-identifier">wrap_mode</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">WrapMode</span><span class="ruby-operator">::</span><span class="ruby-constant">WORD_CHAR</span>
    <span class="ruby-identifier">espaceConseilsText</span>.<span class="ruby-identifier">left_margin</span> = <span class="ruby-value">10</span>
    <span class="ruby-identifier">espaceConseilsText</span>.<span class="ruby-identifier">right_margin</span> = <span class="ruby-value">10</span>
    <span class="ruby-identifier">espaceConseilsText</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;ConseilsTextView&quot;</span>
    
    <span class="ruby-ivar">@bufferConseils</span> = <span class="ruby-identifier">espaceConseilsText</span>.<span class="ruby-identifier">buffer</span>
    <span class="ruby-ivar">@bufferConseils</span>.<span class="ruby-identifier">text</span> = <span class="ruby-string">&quot;&quot;</span>

    <span class="ruby-identifier">espaceConseils</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">ScrolledWindow</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">nil</span>, <span class="ruby-keyword">nil</span>)
    <span class="ruby-identifier">espaceConseils</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">espaceConseilsText</span>)

    <span class="ruby-comment"># Ajout des boutons à la grille d&#39;interface (droite)</span>
    <span class="ruby-comment"># 1ere ligne :</span>
    <span class="ruby-ivar">@gridInterface</span>.<span class="ruby-identifier">attach</span>(<span class="ruby-identifier">genererConseil</span>, <span class="ruby-value">0</span>, <span class="ruby-value">0</span>, <span class="ruby-value">2</span>, <span class="ruby-value">1</span>)
    <span class="ruby-ivar">@gridInterface</span>.<span class="ruby-identifier">attach</span>(<span class="ruby-identifier">montrerConseil</span>, <span class="ruby-value">3</span>, <span class="ruby-value">0</span>, <span class="ruby-value">2</span>, <span class="ruby-value">1</span>)
    <span class="ruby-comment"># 2eme ligne + 3e ligne :</span>
    <span class="ruby-ivar">@gridInterface</span>.<span class="ruby-identifier">attach</span>(<span class="ruby-identifier">espaceConseils</span>, <span class="ruby-value">0</span>, <span class="ruby-value">1</span>, <span class="ruby-value">5</span>, <span class="ruby-value">2</span>)
    <span class="ruby-comment"># 4e ligne :</span>
    <span class="ruby-ivar">@gridInterface</span>.<span class="ruby-identifier">attach</span>(<span class="ruby-identifier">reglesDuJeu</span>, <span class="ruby-value">1</span>, <span class="ruby-value">3</span>, <span class="ruby-value">3</span>, <span class="ruby-value">1</span>)
    <span class="ruby-comment"># 5e ligne :</span>
    <span class="ruby-ivar">@gridInterface</span>.<span class="ruby-identifier">attach</span>(<span class="ruby-identifier">verification</span>, <span class="ruby-value">1</span>, <span class="ruby-value">4</span>, <span class="ruby-value">3</span>, <span class="ruby-value">1</span>)
    <span class="ruby-comment"># 6e ligne :</span>
    <span class="ruby-ivar">@gridInterface</span>.<span class="ruby-identifier">attach</span>(<span class="ruby-identifier">sauvegarderBouton</span>, <span class="ruby-value">0</span>, <span class="ruby-value">5</span>, <span class="ruby-value">2</span>, <span class="ruby-value">1</span>)
    <span class="ruby-ivar">@gridInterface</span>.<span class="ruby-identifier">attach</span>(<span class="ruby-identifier">chargerBouton</span>, <span class="ruby-value">2</span>, <span class="ruby-value">5</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>)
    <span class="ruby-ivar">@gridInterface</span>.<span class="ruby-identifier">attach</span>(<span class="ruby-ivar">@viderBouton</span>, <span class="ruby-value">3</span>, <span class="ruby-value">5</span>, <span class="ruby-value">2</span>, <span class="ruby-value">1</span>)
    <span class="ruby-comment"># 7e ligne :</span>
    <span class="ruby-ivar">@gridInterface</span>.<span class="ruby-identifier">attach</span>(<span class="ruby-ivar">@undoBouton</span>, <span class="ruby-value">1</span>, <span class="ruby-value">6</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>)
    <span class="ruby-ivar">@gridInterface</span>.<span class="ruby-identifier">attach</span>(<span class="ruby-ivar">@redoBouton</span>, <span class="ruby-value">3</span>, <span class="ruby-value">6</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>)

    <span class="ruby-ivar">@hbox</span>.<span class="ruby-identifier">add</span>(<span class="ruby-ivar">@gridInterface</span>)
    <span class="ruby-ivar">@fenetre</span>.<span class="ruby-identifier">add</span>(<span class="ruby-ivar">@hbox</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-creationFenetre" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">creationFenetre</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode de création de la fenêtre (modifiée pour ne pas créer la fenêtre)</p>
          
          

          
          <div class="method-source-code" id="creationFenetre-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 235</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">creationFenetre</span>() <span class="ruby-comment">#:doc:</span>
    <span class="ruby-ivar">@fenetre</span>.<span class="ruby-identifier">set_title</span>(<span class="ruby-node">&quot;Hashi - Libre - #{@pseudo}&quot;</span>)
    <span class="ruby-ivar">@fenetre</span>.<span class="ruby-identifier">signal_connect</span>(<span class="ruby-string">&#39;destroy&#39;</span>){
        <span class="ruby-keyword">if</span>(<span class="ruby-ivar">@timer</span>.<span class="ruby-identifier">getEnExec</span>)
            <span class="ruby-ivar">@timer</span>.<span class="ruby-identifier">stopChrono</span>
            <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">kill</span>(<span class="ruby-ivar">@threadAffichageChrono</span>)
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">sauvegarderVersFichier</span>()
        <span class="ruby-constant">Gtk</span>.<span class="ruby-identifier">main_quit</span>
    }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-creationGrilleDeBoutons" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">creationGrilleDeBoutons</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode de création d&#39;une grid de boutons et de son array correspondant pour représenter la grille de jeu</p>
          
          

          
          <div class="method-source-code" id="creationGrilleDeBoutons-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 248</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">creationGrilleDeBoutons</span>() <span class="ruby-comment">#:doc:</span>
    <span class="ruby-comment"># Grille des boutons</span>
    <span class="ruby-ivar">@grid</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Grid</span>.<span class="ruby-identifier">new</span>() <span class="ruby-comment"># Grid qui va contenir les boutons</span>
    <span class="ruby-ivar">@grid</span>.<span class="ruby-identifier">column_homogeneous</span>=<span class="ruby-keyword">true</span>
    <span class="ruby-ivar">@grid</span>.<span class="ruby-identifier">row_homogeneous</span>=<span class="ruby-keyword">true</span>
    <span class="ruby-ivar">@grilleBT</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@taille</span>) {<span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@taille</span>)} <span class="ruby-comment"># Tableau de boutons (correspond aux cases du tableau grille)</span>

    <span class="ruby-comment"># Création des boutons de la grille :</span>
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword">in</span> <span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-ivar">@taille</span><span class="ruby-value">-1</span>
        <span class="ruby-keyword">for</span> <span class="ruby-identifier">j</span> <span class="ruby-keyword">in</span> <span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-ivar">@taille</span><span class="ruby-value">-1</span>
            <span class="ruby-ivar">@grilleBT</span>[<span class="ruby-identifier">i</span>][<span class="ruby-identifier">j</span>] = <span class="ruby-identifier">creerBoutonGrille</span>(<span class="ruby-identifier">i</span>,<span class="ruby-identifier">j</span>) <span class="ruby-comment"># Crée un nouveau bouton, configure son comportement et l&#39;ajoute à la grid</span>
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-creerBoutonGrille" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">creerBoutonGrille</span><span
            class="method-args">(posx, posy)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode qui crée un bouton en connaissant sa position dans la grille</p>
<ul><li>
<p><code>posx</code> [Integer] - la position (future) en x du bouton dans la grille des boutons (@grid)</p>
</li><li>
<p><code>posy</code> [Integer] - la position (future) en y du bouton dans la grille des boutons (@grid)</p>
</li></ul>
          
          

          
          <div class="method-source-code" id="creerBoutonGrille-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 1067</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">creerBoutonGrille</span>(<span class="ruby-identifier">posx</span>, <span class="ruby-identifier">posy</span>) <span class="ruby-comment">#:doc:</span>
    <span class="ruby-identifier">bouton</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Button</span>.<span class="ruby-identifier">new</span>()
    <span class="ruby-identifier">bouton</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_grille&quot;</span>
    <span class="ruby-identifier">bouton</span>.<span class="ruby-identifier">set_can_focus</span>(<span class="ruby-keyword">false</span>)
    <span class="ruby-identifier">bouton</span>.<span class="ruby-identifier">set_focus_on_click</span>(<span class="ruby-keyword">false</span>)
    <span class="ruby-keyword">if</span>(<span class="ruby-ivar">@grille</span>[<span class="ruby-identifier">posx</span>][<span class="ruby-identifier">posy</span>]<span class="ruby-operator">==</span><span class="ruby-keyword">nil</span>)
        <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;ATTENTION : Bouton qui ne représente pas une case de la grille&quot;</span>
    <span class="ruby-keyword">elsif</span>(<span class="ruby-ivar">@grille</span>[<span class="ruby-identifier">posx</span>][<span class="ruby-identifier">posy</span>].<span class="ruby-identifier">estIle?</span>)
        <span class="ruby-comment"># Affiche sur le bouton, l&#39;image de la valeur de l&#39;île :</span>
        <span class="ruby-comment"># Détruit l&#39;ancienne image du bouton, s&#39;il y en avait une</span>
        <span class="ruby-identifier">detruireImage</span>(<span class="ruby-identifier">bouton</span>.<span class="ruby-identifier">image</span>)
        <span class="ruby-identifier">imgIle</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">Image</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:file</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;../res/img/#{@grille[posx][posy].valeur}.svg&quot;</span>)
        <span class="ruby-identifier">imgIle</span>.<span class="ruby-identifier">pixbuf</span>=<span class="ruby-identifier">imgIle</span>.<span class="ruby-identifier">pixbuf</span>.<span class="ruby-identifier">scale_simple</span>(<span class="ruby-ivar">@tailleImg</span>,<span class="ruby-ivar">@tailleImg</span>, <span class="ruby-constant">GdkPixbuf</span><span class="ruby-operator">::</span><span class="ruby-constant">InterpType</span><span class="ruby-operator">::</span><span class="ruby-constant">BILINEAR</span>)
        <span class="ruby-identifier">bouton</span>.<span class="ruby-identifier">set_image</span>(<span class="ruby-identifier">imgIle</span>)
        <span class="ruby-identifier">bouton</span>.<span class="ruby-identifier">set_always_show_image</span>(<span class="ruby-keyword">true</span>)
        <span class="ruby-identifier">bouton</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;btn_grille_ile&quot;</span> 
    <span class="ruby-keyword">elsif</span>(<span class="ruby-ivar">@grille</span>[<span class="ruby-identifier">posx</span>][<span class="ruby-identifier">posy</span>].<span class="ruby-identifier">contientPont</span>)
        <span class="ruby-comment"># Comportement lors de l&#39;appui sur un pont possible</span>
        <span class="ruby-identifier">bouton</span>.<span class="ruby-identifier">signal_connect</span>(<span class="ruby-string">&#39;clicked&#39;</span>){
            <span class="ruby-comment"># On cherche à récupérer les pont possibles sur cette case dans la liste des ponts (il peut y en avoir un ou deux)</span>
            <span class="ruby-identifier">ponts</span>=[]
            <span class="ruby-keyword">for</span> <span class="ruby-identifier">p</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@listPont</span>
                <span class="ruby-keyword">for</span> <span class="ruby-identifier">c</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">tabCases</span>
                    <span class="ruby-keyword">if</span>(<span class="ruby-identifier">c</span>.<span class="ruby-identifier">positionX</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">posx</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">positionY</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">posy</span>) <span class="ruby-comment"># La case du pont est la case actuellement cliquée.</span>
                        <span class="ruby-identifier">ponts</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">p</span>
                    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
            <span class="ruby-keyword">end</span>
            <span class="ruby-comment"># On a récupéré dans ponts les ponts contenant la case cliquée</span>
            <span class="ruby-comment"># Comment choisir quel pont modifier ? On choisit pour celui qui n&#39;est pas nul, s&#39;ils le sont tous, le plus court, s&#39;ils sont de la même taille, on s&#39;aide de @choixSens</span>
            <span class="ruby-keyword">if</span>(<span class="ruby-identifier">ponts</span>.<span class="ruby-identifier">length</span><span class="ruby-operator">==</span><span class="ruby-value">1</span>)
                <span class="ruby-keyword">self</span>.<span class="ruby-identifier">modifierPont</span>(<span class="ruby-identifier">ponts</span>[<span class="ruby-value">0</span>], <span class="ruby-keyword">false</span>) <span class="ruby-comment"># Il n&#39;y a qu&#39;un pont sur la case</span>
            <span class="ruby-keyword">elsif</span>(<span class="ruby-identifier">ponts</span>.<span class="ruby-identifier">length</span><span class="ruby-operator">==</span><span class="ruby-value">2</span>)
                <span class="ruby-keyword">if</span>((<span class="ruby-identifier">ponts</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">etatPont</span><span class="ruby-operator">==</span><span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">ponts</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">etatPont</span><span class="ruby-operator">==</span><span class="ruby-value">0</span>)) <span class="ruby-comment"># Les deux ponts sont à zéro, on modifie le premier | Le premier pont est à 1, on le fait évoluer en remettant bien le deuxième à zéro (au cas où)</span>
                    <span class="ruby-identifier">change</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">modifierPont</span>(<span class="ruby-identifier">ponts</span>[<span class="ruby-value">0</span>], <span class="ruby-keyword">false</span>)
                    <span class="ruby-keyword">if</span>(<span class="ruby-operator">!</span><span class="ruby-identifier">change</span>)
                        <span class="ruby-identifier">change</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">modifierPont</span>(<span class="ruby-identifier">ponts</span>[<span class="ruby-value">1</span>], <span class="ruby-keyword">false</span>)
                    <span class="ruby-keyword">else</span>
                        <span class="ruby-identifier">ponts</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">reset</span>(<span class="ruby-keyword">false</span>)
                    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">elsif</span>(<span class="ruby-identifier">ponts</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">etatPont</span><span class="ruby-operator">==</span><span class="ruby-value">1</span>) <span class="ruby-comment"># Un des deux ponts est affiché, on doit donc s&#39;occuper de lui en priorité</span>
                    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">modifierPont</span>(<span class="ruby-identifier">ponts</span>[<span class="ruby-value">0</span>], <span class="ruby-keyword">false</span>)
                <span class="ruby-keyword">elsif</span>(<span class="ruby-identifier">ponts</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">etatPont</span><span class="ruby-operator">==</span><span class="ruby-value">1</span>)
                    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">modifierPont</span>(<span class="ruby-identifier">ponts</span>[<span class="ruby-value">1</span>], <span class="ruby-keyword">false</span>)
                <span class="ruby-keyword">elsif</span>(<span class="ruby-identifier">ponts</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">etatPont</span><span class="ruby-operator">==</span><span class="ruby-value">2</span>) <span class="ruby-comment"># Le premier pont est à 2, on le remet à zéro puis on fait évoluer le second pont |</span>
                        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">modifierPont</span>(<span class="ruby-identifier">ponts</span>[<span class="ruby-value">0</span>], <span class="ruby-keyword">false</span>)
                        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">modifierPont</span>(<span class="ruby-identifier">ponts</span>[<span class="ruby-value">1</span>], <span class="ruby-keyword">false</span>)
                <span class="ruby-keyword">elsif</span>(<span class="ruby-identifier">ponts</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">etatPont</span><span class="ruby-operator">==</span><span class="ruby-value">2</span>) <span class="ruby-comment"># Le second pont est à 1, on le fait évoluer et on remet l&#39;autre à zéro (au cas où) | Le second pont est à 2, on remet tous les ponts à zéro (le premier avec reset, le second avec modifierPont)</span>
                        <span class="ruby-identifier">ponts</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">reset</span>(<span class="ruby-keyword">false</span>)
                        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">modifierPont</span>(<span class="ruby-identifier">ponts</span>[<span class="ruby-value">1</span>], <span class="ruby-keyword">false</span>)
                <span class="ruby-keyword">else</span> 
                        <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Problème avec les ponts qui se croisent&quot;</span>
                <span class="ruby-keyword">end</span> 
            <span class="ruby-keyword">else</span>
                <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;ERREUR : Pas le bon nombre de ponts sur une même case : #{ponts.length}&quot;</span>
            <span class="ruby-keyword">end</span>
        }
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">bouton</span>.<span class="ruby-identifier">set_relief</span>(<span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">ReliefStyle</span><span class="ruby-operator">::</span><span class="ruby-constant">NONE</span>)
    <span class="ruby-ivar">@grid</span>.<span class="ruby-identifier">attach</span>(<span class="ruby-identifier">bouton</span>, <span class="ruby-identifier">posx</span>, <span class="ruby-identifier">posy</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">bouton</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-creerChrono" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">creerChrono</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode qui permet d&#39;initialiser et de lancer le chrono et son affichage.</p>
          
          

          
          <div class="method-source-code" id="creerChrono-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 210</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">creerChrono</span>() <span class="ruby-comment">#:doc:</span>
    <span class="ruby-ivar">@timer</span> = <span class="ruby-constant">Chrono</span>.<span class="ruby-identifier">creer</span>(<span class="ruby-value">0</span>) <span class="ruby-comment"># Un chrono qui augmente sa valeur toutes les secondes et commence à 0.</span>
    <span class="ruby-ivar">@timer</span>.<span class="ruby-identifier">startChrono</span> <span class="ruby-comment"># Démarre le chrono</span>
    <span class="ruby-identifier">afficherChrono</span>()
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-creerPontsPotentiels" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">creerPontsPotentiels</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode qui créé les ponts potentiels de chaque ile de la liste</p>
          
          

          
          <div class="method-source-code" id="creerPontsPotentiels-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 717</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">creerPontsPotentiels</span>() <span class="ruby-comment">#:doc:</span>
    <span class="ruby-comment"># On va créer tous les Pont pour remplir la liste de Pont et les liste de Pont potentiels des Iles</span>
    <span class="ruby-ivar">@listIle</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i1</span><span class="ruby-operator">|</span>
        <span class="ruby-ivar">@listIle</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i2</span><span class="ruby-operator">|</span>
            <span class="ruby-comment"># On vérifie qu&#39;un Pont entre deux Ile peut exister</span>
            <span class="ruby-keyword">if</span>(<span class="ruby-identifier">i1</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">i2</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i1</span>.<span class="ruby-identifier">peutEtreRelieeA?</span>(<span class="ruby-identifier">i2</span>,<span class="ruby-keyword">false</span>))
                <span class="ruby-comment"># On crée le Pont</span>
                <span class="ruby-identifier">tab_cases</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>()
                <span class="ruby-identifier">x</span> = <span class="ruby-identifier">i1</span>.<span class="ruby-identifier">positionX</span>
                <span class="ruby-identifier">y</span> = <span class="ruby-identifier">i1</span>.<span class="ruby-identifier">positionY</span>
                <span class="ruby-comment"># On trace la liste de cases survolées par le pont s&#39;il suit Y</span>
                <span class="ruby-keyword">if</span>(<span class="ruby-identifier">i1</span>.<span class="ruby-identifier">positionX</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">i2</span>.<span class="ruby-identifier">positionX</span>)
                    <span class="ruby-identifier">y</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                    <span class="ruby-keyword">while</span>(<span class="ruby-identifier">y</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">i2</span>.<span class="ruby-identifier">positionY</span>)
                        <span class="ruby-identifier">tab_cases</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@grille</span>[<span class="ruby-identifier">x</span>][<span class="ruby-identifier">y</span>])
                        <span class="ruby-identifier">y</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">else</span>
                    <span class="ruby-comment"># On trace la liste de cases survolées par le pont suivant X</span>
                    <span class="ruby-identifier">x</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                    <span class="ruby-keyword">while</span>(<span class="ruby-identifier">x</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">i2</span>.<span class="ruby-identifier">positionX</span>)
                        <span class="ruby-identifier">tab_cases</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@grille</span>[<span class="ruby-identifier">x</span>][<span class="ruby-identifier">y</span>])
                        <span class="ruby-identifier">x</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
                
                <span class="ruby-identifier">p</span> = <span class="ruby-constant">Pont</span>.<span class="ruby-identifier">creer</span>(<span class="ruby-identifier">tab_cases</span>,<span class="ruby-identifier">i1</span>,<span class="ruby-identifier">i2</span>, <span class="ruby-value">0</span>)
                <span class="ruby-comment"># On vérifie que le Pont n&#39;existe pas déjà, et que son tracé ne survole pas d&#39;Ile</span>
                <span class="ruby-keyword">if</span>(<span class="ruby-identifier">puisJeCreerPont</span>(<span class="ruby-identifier">p</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tab_cases</span>.<span class="ruby-identifier">empty?</span>)
                    <span class="ruby-identifier">ajoutOK</span> = <span class="ruby-keyword">true</span>
                    <span class="ruby-identifier">tab_cases</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
                        <span class="ruby-keyword">if</span>(<span class="ruby-identifier">c</span>.<span class="ruby-identifier">estIle?</span>)
                            <span class="ruby-identifier">ajoutOK</span> = <span class="ruby-keyword">false</span>
                        <span class="ruby-keyword">end</span>
                    <span class="ruby-keyword">end</span>
                    <span class="ruby-keyword">if</span>(<span class="ruby-identifier">ajoutOK</span>)
                        <span class="ruby-identifier">i1</span>.<span class="ruby-identifier">ajouterPont</span>(<span class="ruby-identifier">p</span>)
                        <span class="ruby-identifier">i2</span>.<span class="ruby-identifier">ajouterPont</span>(<span class="ruby-identifier">p</span>)
                        <span class="ruby-ivar">@listPont</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">p</span>)
                    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-detruireImage" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">detruireImage</span><span
            class="method-args">(image)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode appelée chaque fois qu&#39;on se débarrasse d&#39;une image qu&#39;on ne veut plus afficher. Permet de réduire drastiquement la consommation de mémoire vive.</p>
<ul><li>
<p><code>image</code> [Gtk::Image] - l&#39;image à détruire</p>
</li></ul>
          
          

          
          <div class="method-source-code" id="detruireImage-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 1240</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">detruireImage</span>(<span class="ruby-identifier">image</span>) <span class="ruby-comment">#:doc:</span>
    <span class="ruby-keyword">if</span>(<span class="ruby-identifier">image</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>)
        <span class="ruby-identifier">image</span>.<span class="ruby-identifier">clear</span>
        <span class="ruby-identifier">image</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-finDePartie" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">finDePartie</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode appelée quand la partie se termine (grille résolue)</p>
          
          

          
          <div class="method-source-code" id="finDePartie-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 559</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">finDePartie</span>() <span class="ruby-comment">#:doc:</span>
    <span class="ruby-ivar">@timer</span>.<span class="ruby-identifier">stopChrono</span>
    <span class="ruby-keyword">case</span> <span class="ruby-ivar">@difficulte</span>
    <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;Facile&quot;</span>
        <span class="ruby-identifier">diff</span>=<span class="ruby-value">1</span>
    <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;Moyenne&quot;</span>
        <span class="ruby-identifier">diff</span>=<span class="ruby-value">2</span>
    <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;Difficile&quot;</span>
        <span class="ruby-identifier">diff</span>=<span class="ruby-value">3</span>
    <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">diff</span>=<span class="ruby-value">0</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">scoreFinal</span> = <span class="ruby-identifier">calculDuScore</span>()
    <span class="ruby-identifier">info_verif_grille</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageDialog</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:parent</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-ivar">@fenetre</span>, <span class="ruby-value">:flags</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-value">:destroy_with_parent</span>, <span class="ruby-value">:type</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-value">:info</span>, <span class="ruby-value">:buttons</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-value">:close</span>, <span class="ruby-value">:message</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;Grille validée&quot;</span>)
    <span class="ruby-identifier">info_verif_grille</span>.<span class="ruby-identifier">secondary_text</span>=<span class="ruby-node">&quot;Félicitations, vous avez réussi votre grille en #{@nbCoups} coups.\nVotre partie a duré #{@timer.afficher}.\nVotre score est : #{scoreFinal}&quot;</span>
    <span class="ruby-identifier">info_verif_grille</span>.<span class="ruby-identifier">run</span>()
    <span class="ruby-identifier">info_verif_grille</span>.<span class="ruby-identifier">destroy</span>()
    <span class="ruby-keyword">if</span>(<span class="ruby-identifier">diff</span><span class="ruby-operator">!=</span><span class="ruby-value">0</span>)
        <span class="ruby-constant">ClassementLibre</span>.<span class="ruby-identifier">ajoutDansLaBDD</span>(<span class="ruby-ivar">@pseudo</span>, <span class="ruby-identifier">scoreFinal</span>, <span class="ruby-identifier">diff</span>)
    <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">puts</span> (<span class="ruby-string">&quot;Valeur de difficulté inconnue, le score ne sera pas sauvegardé.&quot;</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment">#Retour au menu</span>
    <span class="ruby-ivar">@fenetre</span>.<span class="ruby-identifier">remove</span>(<span class="ruby-ivar">@hbox</span>)
    <span class="ruby-constant">InterfaceAccueilJeu</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@fenetre</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-positionDansGrille" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">positionDansGrille</span><span
            class="method-args">(widget)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode qui prends en paramètre un widget recherché dans la grille de boutons, et renvoie ses coordonnées dans un tableau (vide si non trouvé)</p>
<ul><li>
<p><code>widget</code> [Gtk::Widget]- le widget à trouver dans la grille de bouton (@grilleBT)</p>
</li></ul>
          
          

          
          <div class="method-source-code" id="positionDansGrille-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 1053</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">positionDansGrille</span>(<span class="ruby-identifier">widget</span>) <span class="ruby-comment">#:doc:</span>
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword">in</span> <span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-ivar">@taille</span><span class="ruby-value">-1</span>
        <span class="ruby-keyword">for</span> <span class="ruby-identifier">j</span> <span class="ruby-keyword">in</span> <span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-ivar">@taille</span><span class="ruby-value">-1</span>
            <span class="ruby-keyword">if</span>(<span class="ruby-ivar">@grilleBT</span>[<span class="ruby-identifier">i</span>][<span class="ruby-identifier">j</span>].<span class="ruby-identifier">object_id</span><span class="ruby-operator">==</span><span class="ruby-identifier">widget</span>.<span class="ruby-identifier">object_id</span>)
                <span class="ruby-keyword">return</span> [<span class="ruby-identifier">i</span>,<span class="ruby-identifier">j</span>]
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> []
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remplissageFichier" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remplissageFichier</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode permettant de générer la grille d&#39;îles et les ponts solutions à partir d&#39;un fichier</p>
          
          

          
          <div class="method-source-code" id="remplissageFichier-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 638</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remplissageFichier</span>() <span class="ruby-comment">#:doc:</span>
    <span class="ruby-comment"># Lire fichier map</span>
    <span class="ruby-identifier">donnes_map</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-ivar">@nomMap</span>).<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;\n&quot;</span>)
    <span class="ruby-comment"># On récupère la difficulté de la grille</span>
    <span class="ruby-ivar">@difficulte</span> = <span class="ruby-identifier">donnes_map</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">strip</span>()
    <span class="ruby-comment"># On récupère la taille dans le fichier, puis le nombre d&#39;Iles</span>
    <span class="ruby-ivar">@taille</span> = <span class="ruby-identifier">donnes_map</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span> 
    <span class="ruby-identifier">nbIles</span> = <span class="ruby-identifier">donnes_map</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span> 
    <span class="ruby-comment"># On crée des Array destinés à contenir les futures Ile et Pont</span>
    <span class="ruby-identifier">arr_iles</span> = <span class="ruby-identifier">donnes_map</span>.<span class="ruby-identifier">take</span>(<span class="ruby-identifier">nbIles</span>)
    <span class="ruby-identifier">arr_ponts</span> = <span class="ruby-identifier">donnes_map</span>.<span class="ruby-identifier">drop</span>(<span class="ruby-identifier">nbIles</span>)

    <span class="ruby-comment"># Initialiser la grille de la taille convenue</span>
    <span class="ruby-ivar">@grille</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@taille</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@taille</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">j</span><span class="ruby-operator">|</span> <span class="ruby-constant">Case</span>.<span class="ruby-identifier">creer</span>(<span class="ruby-identifier">i</span>,<span class="ruby-identifier">j</span>)}}
    
    <span class="ruby-comment"># On crée les Ile à partir de l&#39;Array du texte provenant du fichier</span>
    <span class="ruby-identifier">arr_iles</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">infos_i</span> = <span class="ruby-identifier">i</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot; &quot;</span>)
        <span class="ruby-identifier">x</span> = <span class="ruby-identifier">infos_i</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">y</span> = <span class="ruby-identifier">infos_i</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">val</span> = <span class="ruby-identifier">infos_i</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">ile</span> = <span class="ruby-constant">Ile</span>.<span class="ruby-identifier">creer</span>(<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">val</span>,<span class="ruby-ivar">@taille</span>,<span class="ruby-ivar">@grille</span>)
        <span class="ruby-ivar">@listIle</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">ile</span>)
        <span class="ruby-ivar">@grille</span>[<span class="ruby-identifier">x</span>][<span class="ruby-identifier">y</span>] = <span class="ruby-identifier">ile</span>
    <span class="ruby-keyword">end</span>
    
    <span class="ruby-comment"># On crée les Pont (solution) à partir de l&#39;Array du texte provenant du fichier</span>
    <span class="ruby-identifier">arr_ponts</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">infos_p</span> = <span class="ruby-identifier">p</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot; &quot;</span>)
        <span class="ruby-identifier">posXD</span> = <span class="ruby-identifier">infos_p</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">posYD</span> = <span class="ruby-identifier">infos_p</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">posXA</span> = <span class="ruby-identifier">infos_p</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">posYA</span> = <span class="ruby-identifier">infos_p</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">type</span> = <span class="ruby-identifier">infos_p</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">ileA</span>=<span class="ruby-keyword">nil</span>
        <span class="ruby-identifier">ileD</span>=<span class="ruby-keyword">nil</span>
        <span class="ruby-comment"># On retrouve les Ile correspondantes dans la liste d&#39;Ile</span>
        <span class="ruby-ivar">@listIle</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
            <span class="ruby-keyword">if</span>(<span class="ruby-identifier">i</span>.<span class="ruby-identifier">positionX</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">posXA</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">positionY</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">posYA</span>)
                <span class="ruby-identifier">ileA</span> = <span class="ruby-identifier">i</span>
            <span class="ruby-keyword">end</span>
            <span class="ruby-keyword">if</span>(<span class="ruby-identifier">i</span>.<span class="ruby-identifier">positionX</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">posXD</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">positionY</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">posYD</span>)
                <span class="ruby-identifier">ileD</span> = <span class="ruby-identifier">i</span>
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        
        
        <span class="ruby-identifier">tab_cases</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>()
        <span class="ruby-identifier">x</span> = <span class="ruby-identifier">posXD</span>
        <span class="ruby-identifier">y</span> = <span class="ruby-identifier">posYD</span>
        <span class="ruby-comment"># On trace la liste de cases survolées par le pont s&#39;il suit Y</span>
        <span class="ruby-keyword">if</span>(<span class="ruby-identifier">posXD</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">posXA</span>)
            <span class="ruby-identifier">y</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
            <span class="ruby-keyword">while</span>(<span class="ruby-identifier">y</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">posYA</span>)
                <span class="ruby-identifier">tab_cases</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@grille</span>[<span class="ruby-identifier">x</span>][<span class="ruby-identifier">y</span>])
                <span class="ruby-identifier">y</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">else</span>
            <span class="ruby-comment"># On trace la liste de cases survolées par le pont suivant X</span>
            <span class="ruby-identifier">x</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
            <span class="ruby-keyword">while</span>(<span class="ruby-identifier">x</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">posXA</span>)
                <span class="ruby-identifier">tab_cases</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@grille</span>[<span class="ruby-identifier">x</span>][<span class="ruby-identifier">y</span>])
                <span class="ruby-identifier">x</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-comment"># On crée l&#39;objet Pont avec le tableau des cases survolées puis on l&#39;ajoute dans les listes correspondantes</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-constant">Pont</span>.<span class="ruby-identifier">creer</span>(<span class="ruby-identifier">tab_cases</span>,<span class="ruby-identifier">ileD</span>,<span class="ruby-identifier">ileA</span>, <span class="ruby-identifier">type</span>)
        <span class="ruby-keyword">if</span>(<span class="ruby-identifier">ileD</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Ile</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">ileA</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Ile</span>))
            <span class="ruby-identifier">ileD</span>.<span class="ruby-identifier">ajouterBonPont</span>(<span class="ruby-identifier">p</span>)
            <span class="ruby-identifier">ileA</span>.<span class="ruby-identifier">ajouterBonPont</span>(<span class="ruby-identifier">p</span>)
        <span class="ruby-keyword">else</span>
            <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;IllegalABP sur île: pas une île&quot;</span>
            <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Pont incriminé : &quot;</span>
            <span class="ruby-identifier">puts</span> <span class="ruby-identifier">p</span>
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remplissageIlesVoisines" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remplissageIlesVoisines</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode permettant de remplir les voisines de chaque ile de la liste</p>
          
          

          
          <div class="method-source-code" id="remplissageIlesVoisines-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 775</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remplissageIlesVoisines</span>()<span class="ruby-comment">#:doc:</span>
    <span class="ruby-comment"># Remplissage des listes d&#39;îles voisines</span>
    <span class="ruby-ivar">@listIle</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i1</span><span class="ruby-operator">|</span>
        <span class="ruby-ivar">@listIle</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i2</span><span class="ruby-operator">|</span>
            <span class="ruby-keyword">if</span>(<span class="ruby-operator">!</span><span class="ruby-identifier">i1</span>.<span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">i2</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i1</span>.<span class="ruby-identifier">peutEtreRelieeA?</span>(<span class="ruby-identifier">i2</span>,<span class="ruby-keyword">false</span>))
                <span class="ruby-identifier">i1</span>.<span class="ruby-identifier">ajouterIleVoisine</span>(<span class="ruby-identifier">i2</span>)
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-restaurerDepuisFichier" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">restaurerDepuisFichier</span><span
            class="method-args">(cheminSAV)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode permettant de reprendre une sauvegarde à partir d&#39;un fichier</p>
<ul><li>
<p><code>cheminSAV</code> [String] + Emplacement de la sauvegarde, sinon “”</p>
</li></ul>
          
          

          
          <div class="method-source-code" id="restaurerDepuisFichier-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 1295</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">restaurerDepuisFichier</span>(<span class="ruby-identifier">cheminSAV</span>)<span class="ruby-comment">#:doc:</span>
    <span class="ruby-identifier">sauvegarde</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">cheminSAV</span>).<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;\n&quot;</span>)
    <span class="ruby-comment"># On récupère le nom de la grille</span>
    <span class="ruby-ivar">@nomMap</span> = <span class="ruby-identifier">sauvegarde</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">strip</span>()

    <span class="ruby-comment"># On recharge la grille</span>
    <span class="ruby-identifier">remplissageFichier</span>()<span class="ruby-comment">#:doc:</span>

    <span class="ruby-comment"># On récupère le pseudo</span>
    <span class="ruby-ivar">@pseudo</span> = <span class="ruby-identifier">sauvegarde</span>.<span class="ruby-identifier">shift</span>() 
    <span class="ruby-keyword">if</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">getMode</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">sauvegarde</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>)
        <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;ERREUR : Mode de jeu de la sauvegarde différent !&quot;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">getMode</span>() <span class="ruby-operator">==</span> <span class="ruby-value">1</span>)
        <span class="ruby-ivar">@timer</span> = <span class="ruby-constant">Timer</span>.<span class="ruby-identifier">creer</span>(<span class="ruby-identifier">sauvegarde</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>)
    <span class="ruby-keyword">else</span>
        <span class="ruby-ivar">@timer</span> = <span class="ruby-constant">Chrono</span>.<span class="ruby-identifier">creer</span>(<span class="ruby-identifier">sauvegarde</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-ivar">@nbGrilles</span> =  <span class="ruby-identifier">sauvegarde</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span> 
    <span class="ruby-ivar">@nbCoups</span> = <span class="ruby-identifier">sauvegarde</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span> 
    <span class="ruby-identifier">nb_ponts</span> = <span class="ruby-identifier">sauvegarde</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span> 
    <span class="ruby-identifier">nb_undo</span> = <span class="ruby-identifier">sauvegarde</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span> 
    <span class="ruby-identifier">nb_redo</span> = <span class="ruby-identifier">sauvegarde</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span> 

    <span class="ruby-identifier">nb_undo_ok</span> = <span class="ruby-value">0</span>
    <span class="ruby-identifier">nb_redo_ok</span> = <span class="ruby-value">0</span>

    <span class="ruby-identifier">arr_ponts</span> = <span class="ruby-identifier">sauvegarde</span>.<span class="ruby-identifier">take</span>(<span class="ruby-identifier">nb_ponts</span>)
    <span class="ruby-identifier">sauvegarde</span> = <span class="ruby-identifier">sauvegarde</span>.<span class="ruby-identifier">drop</span>(<span class="ruby-identifier">nb_ponts</span>)
    <span class="ruby-identifier">arr_undo</span> = <span class="ruby-identifier">sauvegarde</span>.<span class="ruby-identifier">take</span>(<span class="ruby-identifier">nb_undo</span>)
    <span class="ruby-identifier">sauvegarde</span> = <span class="ruby-identifier">sauvegarde</span>.<span class="ruby-identifier">drop</span>(<span class="ruby-identifier">nb_undo</span>)
    <span class="ruby-identifier">arr_redo</span> = <span class="ruby-identifier">sauvegarde</span>.<span class="ruby-identifier">take</span>(<span class="ruby-identifier">nb_redo</span>)
    <span class="ruby-identifier">sauvegarde</span> = <span class="ruby-identifier">sauvegarde</span>.<span class="ruby-identifier">drop</span>(<span class="ruby-identifier">nb_redo</span>)

    <span class="ruby-keyword">if</span>(<span class="ruby-operator">!</span><span class="ruby-identifier">sauvegarde</span>.<span class="ruby-identifier">empty?</span>)
        <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Sauvegarde non consommée intégralement&quot;</span>
        <span class="ruby-identifier">puts</span> <span class="ruby-identifier">sauvegarde</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># On crée les Pont à partir de l&#39;Array du texte provenant du fichier</span>
    <span class="ruby-identifier">arr_ponts</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">infos_p</span> = <span class="ruby-identifier">p</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot; &quot;</span>)
        <span class="ruby-identifier">posXD</span> = <span class="ruby-identifier">infos_p</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">posYD</span> = <span class="ruby-identifier">infos_p</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">posXA</span> = <span class="ruby-identifier">infos_p</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">posYA</span> = <span class="ruby-identifier">infos_p</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">type</span> = <span class="ruby-identifier">infos_p</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">ileA</span>=<span class="ruby-keyword">nil</span>
        <span class="ruby-identifier">ileD</span>=<span class="ruby-keyword">nil</span>
        <span class="ruby-comment"># On retrouve les Ile correspondantes dans la liste d&#39;Ile</span>
        <span class="ruby-ivar">@listIle</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
            <span class="ruby-keyword">if</span>(<span class="ruby-identifier">i</span>.<span class="ruby-identifier">positionX</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">posXA</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">positionY</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">posYA</span>)
                <span class="ruby-identifier">ileA</span> = <span class="ruby-identifier">i</span>
            <span class="ruby-keyword">end</span>
            <span class="ruby-keyword">if</span>(<span class="ruby-identifier">i</span>.<span class="ruby-identifier">positionX</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">posXD</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">positionY</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">posYD</span>)
                <span class="ruby-identifier">ileD</span> = <span class="ruby-identifier">i</span>
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        
        
        <span class="ruby-identifier">tab_cases</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>()
        <span class="ruby-identifier">x</span> = <span class="ruby-identifier">posXD</span>
        <span class="ruby-identifier">y</span> = <span class="ruby-identifier">posYD</span>
        <span class="ruby-comment"># On trace la liste de cases survolées par le pont s&#39;il suit Y</span>
        <span class="ruby-keyword">if</span>(<span class="ruby-identifier">posXD</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">posXA</span>)
            <span class="ruby-identifier">y</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
            <span class="ruby-keyword">while</span>(<span class="ruby-identifier">y</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">posYA</span>)
                <span class="ruby-identifier">tab_cases</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@grille</span>[<span class="ruby-identifier">x</span>][<span class="ruby-identifier">y</span>])
                <span class="ruby-identifier">y</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">else</span>
            <span class="ruby-comment"># On trace la liste de cases survolées par le pont suivant X</span>
            <span class="ruby-identifier">x</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
            <span class="ruby-keyword">while</span>(<span class="ruby-identifier">x</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">posXA</span>)
                <span class="ruby-identifier">tab_cases</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@grille</span>[<span class="ruby-identifier">x</span>][<span class="ruby-identifier">y</span>])
                <span class="ruby-identifier">x</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-comment"># On crée l&#39;objet Pont avec le tableau des cases survolées puis on l&#39;ajoute dans les listes correspondantes</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-constant">Pont</span>.<span class="ruby-identifier">creer</span>(<span class="ruby-identifier">tab_cases</span>,<span class="ruby-identifier">ileD</span>,<span class="ruby-identifier">ileA</span>, <span class="ruby-identifier">type</span>)
        <span class="ruby-keyword">if</span>(<span class="ruby-identifier">ileD</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Ile</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">ileA</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Ile</span>))
            <span class="ruby-identifier">ileD</span>.<span class="ruby-identifier">ajouterPont</span>(<span class="ruby-identifier">p</span>)
            <span class="ruby-identifier">ileA</span>.<span class="ruby-identifier">ajouterPont</span>(<span class="ruby-identifier">p</span>)
            <span class="ruby-ivar">@listPont</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">p</span>)
        <span class="ruby-keyword">else</span>
            <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;IllegalAP sur île: pas une île&quot;</span>
            <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Pont incriminé : &quot;</span>
            <span class="ruby-identifier">puts</span> <span class="ruby-identifier">p</span>
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">arr_undo</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">infos_p</span> = <span class="ruby-identifier">p</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot; &quot;</span>)
        <span class="ruby-identifier">posXD</span> = <span class="ruby-identifier">infos_p</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">posYD</span> = <span class="ruby-identifier">infos_p</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">posXA</span> = <span class="ruby-identifier">infos_p</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">posYA</span> = <span class="ruby-identifier">infos_p</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">type</span> = <span class="ruby-identifier">infos_p</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">ileA</span>=<span class="ruby-keyword">nil</span>
        <span class="ruby-identifier">ileD</span>=<span class="ruby-keyword">nil</span>
        <span class="ruby-comment"># On retrouve les Ile correspondantes dans la liste d&#39;Ile</span>
        <span class="ruby-ivar">@listIle</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
            <span class="ruby-keyword">if</span>(<span class="ruby-identifier">i</span>.<span class="ruby-identifier">positionX</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">posXA</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">positionY</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">posYA</span>)
                <span class="ruby-identifier">ileA</span> = <span class="ruby-identifier">i</span>
            <span class="ruby-keyword">end</span>
            <span class="ruby-keyword">if</span>(<span class="ruby-identifier">i</span>.<span class="ruby-identifier">positionX</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">posXD</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">positionY</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">posYD</span>)
                <span class="ruby-identifier">ileD</span> = <span class="ruby-identifier">i</span>
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        
        <span class="ruby-identifier">tab_cases</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>()
        <span class="ruby-identifier">x</span> = <span class="ruby-identifier">posXD</span>
        <span class="ruby-identifier">y</span> = <span class="ruby-identifier">posYD</span>
        <span class="ruby-comment"># On trace la liste de cases survolées par le pont s&#39;il suit Y</span>
        <span class="ruby-keyword">if</span>(<span class="ruby-identifier">posXD</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">posXA</span>)
            <span class="ruby-identifier">y</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
            <span class="ruby-keyword">while</span>(<span class="ruby-identifier">y</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">posYA</span>)
                <span class="ruby-identifier">tab_cases</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@grille</span>[<span class="ruby-identifier">x</span>][<span class="ruby-identifier">y</span>])
                <span class="ruby-identifier">y</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">else</span>
            <span class="ruby-comment"># On trace la liste de cases survolées par le pont suivant X</span>
            <span class="ruby-identifier">x</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
            <span class="ruby-keyword">while</span>(<span class="ruby-identifier">x</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">posXA</span>)
                <span class="ruby-identifier">tab_cases</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@grille</span>[<span class="ruby-identifier">x</span>][<span class="ruby-identifier">y</span>])
                <span class="ruby-identifier">x</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-comment"># On crée l&#39;objet Pont avec le tableau des cases survolées puis on l&#39;ajoute dans les listes correspondantes</span>
        <span class="ruby-identifier">pf</span> = <span class="ruby-constant">Pont</span>.<span class="ruby-identifier">creer</span>(<span class="ruby-identifier">tab_cases</span>,<span class="ruby-identifier">ileD</span>,<span class="ruby-identifier">ileA</span>, <span class="ruby-identifier">type</span>)
        <span class="ruby-keyword">if</span>(<span class="ruby-identifier">ileD</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Ile</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">ileA</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Ile</span>))
            <span class="ruby-ivar">@listPont</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>
                <span class="ruby-keyword">if</span>(<span class="ruby-identifier">p</span>.<span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">pf</span>))
                    <span class="ruby-ivar">@listCoup</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">p</span>)
                    <span class="ruby-identifier">nb_undo_ok</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">else</span>
            <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;IllegalAP sur île: pas une île&quot;</span>
            <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Pont incriminé : &quot;</span>
            <span class="ruby-identifier">puts</span> <span class="ruby-identifier">p</span>
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span>(<span class="ruby-identifier">nb_undo</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">nb_undo_ok</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">nb_undo</span> <span class="ruby-operator">!=</span> <span class="ruby-ivar">@listCoup</span>.<span class="ruby-identifier">size</span>())
        <span class="ruby-identifier">puts</span> <span class="ruby-identifier">nb_undo</span>
        <span class="ruby-identifier">puts</span> <span class="ruby-identifier">nb_undo_ok</span>
        <span class="ruby-identifier">puts</span> <span class="ruby-ivar">@listCoup</span>.<span class="ruby-identifier">size</span>()
        <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;UNDO KO&quot;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">arr_redo</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">infos_p</span> = <span class="ruby-identifier">p</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot; &quot;</span>)
        <span class="ruby-identifier">posXD</span> = <span class="ruby-identifier">infos_p</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">posYD</span> = <span class="ruby-identifier">infos_p</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">posXA</span> = <span class="ruby-identifier">infos_p</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">posYA</span> = <span class="ruby-identifier">infos_p</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">type</span> = <span class="ruby-identifier">infos_p</span>.<span class="ruby-identifier">shift</span>().<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">ileA</span>=<span class="ruby-keyword">nil</span>
        <span class="ruby-identifier">ileD</span>=<span class="ruby-keyword">nil</span>
        <span class="ruby-comment"># On retrouve les Ile correspondantes dans la liste d&#39;Ile</span>
        <span class="ruby-ivar">@listIle</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
            <span class="ruby-keyword">if</span>(<span class="ruby-identifier">i</span>.<span class="ruby-identifier">positionX</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">posXA</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">positionY</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">posYA</span>)
                <span class="ruby-identifier">ileA</span> = <span class="ruby-identifier">i</span>
            <span class="ruby-keyword">end</span>
            <span class="ruby-keyword">if</span>(<span class="ruby-identifier">i</span>.<span class="ruby-identifier">positionX</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">posXD</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">positionY</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">posYD</span>)
                <span class="ruby-identifier">ileD</span> = <span class="ruby-identifier">i</span>
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        
        
        <span class="ruby-identifier">tab_cases</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>()
        <span class="ruby-identifier">x</span> = <span class="ruby-identifier">posXD</span>
        <span class="ruby-identifier">y</span> = <span class="ruby-identifier">posYD</span>
        <span class="ruby-comment"># On trace la liste de cases survolées par le pont s&#39;il suit Y</span>
        <span class="ruby-keyword">if</span>(<span class="ruby-identifier">posXD</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">posXA</span>)
            <span class="ruby-identifier">y</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
            <span class="ruby-keyword">while</span>(<span class="ruby-identifier">y</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">posYA</span>)
                <span class="ruby-identifier">tab_cases</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@grille</span>[<span class="ruby-identifier">x</span>][<span class="ruby-identifier">y</span>])
                <span class="ruby-identifier">y</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">else</span>
            <span class="ruby-comment"># On trace la liste de cases survolées par le pont suivant X</span>
            <span class="ruby-identifier">x</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
            <span class="ruby-keyword">while</span>(<span class="ruby-identifier">x</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">posXA</span>)
                <span class="ruby-identifier">tab_cases</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@grille</span>[<span class="ruby-identifier">x</span>][<span class="ruby-identifier">y</span>])
                <span class="ruby-identifier">x</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-comment"># On crée l&#39;objet Pont avec le tableau des cases survolées puis on l&#39;ajoute dans les listes correspondantes</span>
        <span class="ruby-identifier">pf</span> = <span class="ruby-constant">Pont</span>.<span class="ruby-identifier">creer</span>(<span class="ruby-identifier">tab_cases</span>,<span class="ruby-identifier">ileD</span>,<span class="ruby-identifier">ileA</span>, <span class="ruby-identifier">type</span>)
        <span class="ruby-keyword">if</span>(<span class="ruby-identifier">ileD</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Ile</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">ileA</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Ile</span>))
            <span class="ruby-ivar">@listPont</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>
                <span class="ruby-keyword">if</span>(<span class="ruby-identifier">p</span>.<span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">pf</span>))
                    <span class="ruby-ivar">@listReDo</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">p</span>)
                    <span class="ruby-identifier">nb_redo_ok</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">else</span>
            <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;IllegalAP sur île: pas une île&quot;</span>
            <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Pont incriminé : &quot;</span>
            <span class="ruby-identifier">puts</span> <span class="ruby-identifier">p</span>
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span>(<span class="ruby-identifier">nb_redo</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">nb_redo_ok</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">nb_redo</span> <span class="ruby-operator">!=</span> <span class="ruby-ivar">@listReDo</span>.<span class="ruby-identifier">size</span>())
        <span class="ruby-identifier">puts</span> <span class="ruby-identifier">nb_redo</span>
        <span class="ruby-identifier">puts</span> <span class="ruby-identifier">nb_redo_ok</span>
        <span class="ruby-identifier">puts</span> <span class="ruby-ivar">@listReDo</span>.<span class="ruby-identifier">size</span>()
        <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;REDO KO&quot;</span>
    <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-sauvegarderVersFichier" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">sauvegarderVersFichier</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Méthode permettant de sauvegarder une grille en cours de partie</p>
          
          

          
          <div class="method-source-code" id="sauvegarderVersFichier-source">
            <pre><span class="ruby-comment"># File Partie.rb, line 1260</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">sauvegarderVersFichier</span>()<span class="ruby-comment">#:doc:</span>
    <span class="ruby-keyword">if</span>(<span class="ruby-identifier">verifierGrille</span>)
        <span class="ruby-identifier">nomFichier</span> = <span class="ruby-string">&quot;../res/sauvegardes/&quot;</span>

        <span class="ruby-comment"># Noms de fichier via Time</span>
        <span class="ruby-identifier">t</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">new</span>()
        <span class="ruby-identifier">nomFichier</span> = <span class="ruby-identifier">nomFichier</span> <span class="ruby-node">+&quot;#{t.year}-#{t.month}-#{t.mday}_#{t.hour}-#{t.min}-#{t.sec}.sav&quot;</span>

        <span class="ruby-keyword">if</span>(<span class="ruby-operator">!</span><span class="ruby-identifier">nomFichier</span>.<span class="ruby-identifier">empty?</span>)
            <span class="ruby-keyword">if</span>(<span class="ruby-ivar">@timer</span>.<span class="ruby-identifier">getEnExec</span>)
                <span class="ruby-ivar">@timer</span>.<span class="ruby-identifier">stopChrono</span>
            <span class="ruby-keyword">end</span>
            <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">nomFichier</span>,<span class="ruby-string">&quot;w&quot;</span>){
                <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
                <span class="ruby-identifier">f</span>.<span class="ruby-identifier">write</span>(<span class="ruby-node">&quot;#{@nomMap}\n#{@pseudo}\n#{self.getMode}\n#{@timer.valeur}\n#{@nbGrilles}\n#{@nbCoups}\n#{@listPont.size}\n#{@listCoup.size}\n#{@listReDo.size}\n&quot;</span>)
                <span class="ruby-ivar">@listPont</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>
                    <span class="ruby-identifier">f</span>.<span class="ruby-identifier">write</span>(<span class="ruby-node">&quot;#{p.iD.positionX} #{p.iD.positionY} #{p.iA.positionX} #{p.iA.positionY} #{p.etatPont}\n&quot;</span>)
                <span class="ruby-keyword">end</span>
                <span class="ruby-ivar">@listCoup</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>
                    <span class="ruby-identifier">f</span>.<span class="ruby-identifier">write</span>(<span class="ruby-node">&quot;#{p.iD.positionX} #{p.iD.positionY} #{p.iA.positionX} #{p.iA.positionY} #{p.etatPont}\n&quot;</span>)
                <span class="ruby-keyword">end</span>
                <span class="ruby-ivar">@listReDo</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>
                    <span class="ruby-identifier">f</span>.<span class="ruby-identifier">write</span>(<span class="ruby-node">&quot;#{p.iD.positionX} #{p.iD.positionY} #{p.iA.positionX} #{p.iA.positionY} #{p.etatPont}\n&quot;</span>)
                <span class="ruby-keyword">end</span>
            }
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">grille_invalide</span> = <span class="ruby-constant">Gtk</span><span class="ruby-operator">::</span><span class="ruby-constant">MessageDialog</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:parent</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-ivar">@fenetre</span>, <span class="ruby-value">:flags</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-value">:destroy_with_parent</span>, <span class="ruby-value">:type</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-value">:info</span>, <span class="ruby-value">:buttons</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-value">:ok</span>, <span class="ruby-value">:message</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&quot;Les ponts ne sont pas bien reliés !&quot;</span>)
        <span class="ruby-identifier">grille_invalide</span>.<span class="ruby-identifier">run</span>()
        <span class="ruby-identifier">grille_invalide</span>.<span class="ruby-identifier">destroy</span>()
    <span class="ruby-keyword">end</span>    
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>

</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

